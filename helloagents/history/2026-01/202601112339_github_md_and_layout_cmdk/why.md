# 变更提案: GitHub 文档体系 + 布局/密度快捷控制增强

## 需求背景

当前项目已具备较完整的同步管线与前端交互能力，但 GitHub 侧的协作入口（Issue/PR 模板、贡献与安全政策等）仍偏基础；同时，布局/密度偏好已存在于偏好面板，但在信息流页缺少“就地可达”的快捷入口，命令面板也未覆盖该类高频操作。

本变更在不改变核心架构（定时同步 → 静态构建 → GitHub Pages 部署）与不破坏现有逻辑根基的前提下，补齐协作与体验两条链路的关键断点。

## 产品分析

### 目标用户与场景
- **阅读用户（站点使用者）:** 在首页/分类页高频浏览，需要更快切换“扫读/浏览”的布局与密度节奏。
- **贡献者（维护/协作者）:** 通过 GitHub 提交 Issue/PR，希望有明确、统一、低摩擦的反馈与贡献流程。

### 价值主张与成功指标
- **价值主张:** 更快完成“看信息 → 切换节奏 → 定位热点”的闭环；更低成本完成“反馈问题/提交改动”的协作闭环。
- **成功指标:**
  - 首页/分类页新增布局/密度快捷入口，且状态可持久化（刷新/跨页保持）。
  - Command Palette 支持布局/密度切换命令，失败时可降级引导到偏好面板。
  - GitHub 仓库新增标准化协作文档与模板，Issue/PR 信息完整度提升。

### 人文关怀
- 兼顾键盘用户与移动端用户：提供命令面板入口与可点击 chip，避免仅依赖隐藏设置。
- 提供双语描述（中文/日本語），降低沟通门槛与误解成本。

## 变更内容
1. 完善 GitHub 社区协作入口（Issue 模板、PR 模板、贡献指南、安全政策、支持入口）。
2. 在首页/分类页新增布局（Grid/List）与密度（Comfort/Compact）快捷 chip，并与现有持久化逻辑联动。
3. Command Palette 增加布局/密度切换命令，提升“无需离开键盘”的操作效率。
4. 补齐必要图标（Grid/List 等）以提升 UI 一致性与可读性。

## 影响范围
- **模块:** web-ui、client-app、docs/repo-meta
- **文件:**
  - `.github/ISSUE_TEMPLATE/*`
  - `.github/pull_request_template.md`
  - `CONTRIBUTING.md`
  - `CODE_OF_CONDUCT.md`
  - `SECURITY.md`
  - `SUPPORT.md`
  - `src/client/features/cmdk.ts`
  - `src/components/Icon.astro`
  - `src/pages/zh/index.astro`
  - `src/pages/ja/index.astro`
  - `src/pages/zh/c/[category].astro`
  - `src/pages/ja/c/[category].astro`
- **API:** 无
- **数据:** 无（仅前端偏好存储）

## 核心场景

### 需求: GitHub 协作入口标准化
**模块:** repo-meta
为仓库提供一致的协作入口，减少沟通成本与重复追问。

#### 场景: 用户提交 Bug
在 GitHub 新建 Issue 时能按表单填写“现象/期望/复现/环境”，信息足够定位问题。
- 预期结果: Issue 自动带上 `bug` 等标签且字段完整。

#### 场景: 用户提交功能建议
在 GitHub 新建 Issue 时能按表单说明“动机/目标/方案/替代方案”，便于决策。
- 预期结果: Issue 自动带上 `enhancement` 等标签。

#### 场景: 贡献者提交 PR
PR 提交时有标准化 checklist（测试/文档/风险），便于审核与回滚。
- 预期结果: PR 描述结构化且可快速验收。

### 需求: 布局/密度的“就地可达”快捷控制
**模块:** web-ui
用户在信息流页无需进入偏好抽屉即可切换布局与密度，并保持跨页一致。

#### 场景: 首页快速切换“扫读/浏览”节奏
用户在首页通过 chip 一键切换 Grid/List、Comfort/Compact。
- 预期结果: 视觉布局与信息密度即时变化，刷新后仍保留。

#### 场景: 分类页快速切换并保持搜索体验
用户在分类页切换布局/密度不影响搜索与已有过滤状态。
- 预期结果: 过滤/搜索仍按原逻辑运行，布局/密度仅改变呈现。

### 需求: 命令面板覆盖布局/密度切换
**模块:** client-app
键盘用户通过 Command Palette 快速切换布局与密度，并得到明确反馈。

#### 场景: 通过命令面板切换布局
用户在任意页面打开命令面板，执行布局切换命令。
- 预期结果: 可切换成功并提示；在无法切换时提示并引导到偏好页。

## 风险评估
- **风险:** GitHub 模板为新增文件，若字段过多可能降低提交意愿；布局快捷入口增加可能造成首页 chip 过密。
- **缓解:** 模板字段控制在“必要且可复现”范围；chip 采用图标+短文案，并保持横向滚动体验。

