---
import "../styles/global.css";
import { href } from "../lib/href";
import Icon from "../components/Icon.astro";

const swHref = href("/sw.js");
---

<!doctype html>
<html lang="zh-Hans">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ACG Radar</title>
    <meta name="description" content="一个每小时自动更新的 ACG 资讯聚合小站（中日双语 UI）。" />
    <meta name="theme-color" content="#f2f4f8" />
    <link rel="manifest" href={href("/manifest.webmanifest")} />
    <link rel="icon" type="image/svg+xml" href={href("/favicon.svg")} />
    <link rel="preconnect" href="https://images.weserv.nl" crossorigin />
    <link rel="preconnect" href="https://wsrv.nl" crossorigin />
  </head>
  <body>
    <main class="mx-auto max-w-3xl px-4 py-12">
      <div class="glass relative overflow-hidden rounded-2xl p-8">
        <div class="pointer-events-none absolute inset-0">
          <div class="absolute -left-28 -top-28 h-80 w-80 rounded-full bg-violet-500/10 blur-3xl"></div>
          <div class="absolute -right-28 -bottom-28 h-80 w-80 rounded-full bg-sky-500/10 blur-3xl"></div>
        </div>

        <div class="relative flex items-center gap-3">
          <span class="radar grid size-12 place-items-center shadow-sm">
            <span class="text-[11px] font-bold text-white/90">ACG</span>
          </span>
          <div>
            <h1 class="m-0 text-2xl font-semibold leading-tight tracking-tight text-slate-950 md:text-3xl">
              ACG Radar
            </h1>
            <p class="mt-1 text-sm text-slate-700">请选择语言 / 言語を選択してください</p>
          </div>
        </div>

        <div class="relative mt-6 grid gap-3 sm:grid-cols-2">
          <a href="./zh/" class="glass clickable group relative overflow-hidden rounded-2xl p-5">
            <div class="absolute inset-0 bg-gradient-to-br from-violet-500/20 via-fuchsia-500/10 to-sky-500/15"></div>
            <div class="relative flex items-center justify-between">
              <div>
                <div class="text-sm font-semibold text-slate-950">中文</div>
                <div class="mt-1 text-xs text-slate-600">进入站点</div>
              </div>
              <Icon
                name="chevron-right"
                size={18}
                class="text-slate-700 transition-transform duration-200 group-hover:translate-x-0.5"
              />
            </div>
          </a>
          <a href="./ja/" class="glass clickable group relative overflow-hidden rounded-2xl p-5">
            <div class="absolute inset-0 bg-gradient-to-br from-sky-500/20 via-cyan-500/10 to-emerald-500/12"></div>
            <div class="relative flex items-center justify-between">
              <div>
                <div class="text-sm font-semibold text-slate-950">日本語</div>
                <div class="mt-1 text-xs text-slate-600">サイトへ</div>
              </div>
              <Icon
                name="chevron-right"
                size={18}
                class="text-slate-700 transition-transform duration-200 group-hover:translate-x-0.5"
              />
            </div>
          </a>
        </div>

        <p class="relative mt-6 text-xs leading-relaxed text-slate-600">
          说明：本站仅聚合标题/摘要并跳转原文，不转载全文；数据由 GitHub Actions 每小时更新。
        </p>
      </div>
    </main>

    <script is:inline define:vars={{ swHref }}>
      (() => {
        try {
          if (!("serviceWorker" in navigator)) return;
          const swUrl = swHref;
          window.addEventListener("load", () => {
            navigator.serviceWorker.register(swUrl).catch(() => {
              // ignore
            });
          });
        } catch {
          // ignore
        }
      })();
    </script>
  </body>
</html>
