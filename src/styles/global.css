@tailwind base;
@tailwind components;
@tailwind utilities;

/* Self-hosted fonts (no Google Fonts dependency) */
/* Outfit */
@font-face {
  font-family: "Outfit";
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url("../assets/fonts/outfit-latin-ext.woff2") format("woff2");
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329,
    U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: "Outfit";
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url("../assets/fonts/outfit-latin.woff2") format("woff2");
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308,
    U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: "Outfit";
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url("../assets/fonts/outfit-latin-ext.woff2") format("woff2");
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329,
    U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: "Outfit";
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url("../assets/fonts/outfit-latin.woff2") format("woff2");
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308,
    U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: "Outfit";
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url("../assets/fonts/outfit-latin-ext.woff2") format("woff2");
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329,
    U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: "Outfit";
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url("../assets/fonts/outfit-latin.woff2") format("woff2");
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308,
    U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

/* Space Grotesk */
@font-face {
  font-family: "Space Grotesk";
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url("../assets/fonts/space-grotesk-latin-ext.woff2") format("woff2");
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329,
    U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: "Space Grotesk";
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url("../assets/fonts/space-grotesk-latin.woff2") format("woff2");
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308,
    U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: "Space Grotesk";
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url("../assets/fonts/space-grotesk-latin-ext.woff2") format("woff2");
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329,
    U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: "Space Grotesk";
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url("../assets/fonts/space-grotesk-latin.woff2") format("woff2");
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308,
    U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: "Space Grotesk";
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url("../assets/fonts/space-grotesk-latin-ext.woff2") format("woff2");
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329,
    U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: "Space Grotesk";
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url("../assets/fonts/space-grotesk-latin.woff2") format("woff2");
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308,
    U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: "Space Grotesk";
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url("../assets/fonts/space-grotesk-latin-ext.woff2") format("woff2");
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329,
    U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: "Space Grotesk";
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url("../assets/fonts/space-grotesk-latin.woff2") format("woff2");
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308,
    U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

/* 轻噪点 + 极光背景（避免死白/死黑） */
:root {
  color-scheme: light;
  --font-sans: "Space Grotesk", "Noto Sans SC", "Noto Sans JP", "PingFang SC", "Hiragino Sans",
    "Microsoft YaHei", ui-sans-serif, system-ui, -apple-system, "Segoe UI", "Helvetica Neue", Arial,
    sans-serif;
  --font-display: "Outfit", "Space Grotesk", "Noto Sans SC", "Noto Sans JP", "PingFang SC", "Hiragino Sans",
    "Microsoft YaHei", ui-sans-serif, system-ui, -apple-system, "Segoe UI", "Helvetica Neue", Arial,
    sans-serif;
  --acg-phi: 1.61803398875;
  --acg-leading: 1.618;
  --acg-leading-tight: 1.272;
  --acg-grid-cols: 12;
  --acg-grid-gap: clamp(14px, 1.8vw, 18px);
  --acg-grid-gutter: clamp(16px, 4vw, 28px);
  --acg-glass-blur: 14px;
  --acg-glass-sat: 1.22;
  --acg-glass-blur-phone: 10px;
  --acg-glass-sat-phone: 1.14;
  --acg-fab-blur: 14px;
  --acg-fab-sat: 1.22;
  --acg-border-pan-duration: 9s;
  --acg-border-pan-scale: 220%;
  --acg-text-phi-xs: clamp(0.72rem, 0.69rem + 0.18vw, 0.78rem);
  --acg-text-phi-sm: clamp(0.86rem, 0.83rem + 0.25vw, 0.93rem);
  --acg-text-phi-md: clamp(1rem, 0.95rem + 0.35vw, 1.1rem);
  --acg-text-phi-lg: clamp(1.4rem, 1.18rem + 0.8vw, 1.62rem);
  --acg-text-phi-xl: clamp(1.62rem, 1.34rem + 1.2vw, 2.1rem);
  --acg-text-phi-2xl: clamp(2.2rem, 1.72rem + 1.9vw, 2.62rem);
  /* Accent system (runtime-switchable via data-acg-accent) */
  --acg-accent-rgb: 124 58 237;
  --acg-accent-2-rgb: 56 189 248;
  --acg-accent-3-rgb: 16 185 129;
  --acg-border-gradient: linear-gradient(
    135deg,
    rgb(var(--acg-accent-rgb) / 0.55),
    rgb(var(--acg-accent-2-rgb) / 0.38),
    rgb(var(--acg-accent-3-rgb) / 0.32)
  );
  --acg-shadow-e1: 0 1px 2px rgba(2, 6, 23, 0.06), 0 1px 0 rgba(255, 255, 255, 0.55) inset;
  --acg-shadow-e2: 0 4px 14px rgba(2, 6, 23, 0.08), 0 1px 0 rgba(255, 255, 255, 0.48) inset;
  --acg-shadow-e3: 0 10px 26px rgba(2, 6, 23, 0.1);
  --acg-shadow-e4: 0 14px 36px rgba(2, 6, 23, 0.12);
  --acg-shadow-e5: var(--shadow-card);
  --acg-shadow-e6: 0 18px 50px rgba(2, 6, 23, 0.14);
  --acg-shadow-e7: 0 24px 68px rgba(2, 6, 23, 0.16);
  --acg-shadow-e8: var(--shadow-card-hover);
  --acg-shadow-e9: var(--shadow-soft);
  --acg-shadow-e10: 0 32px 94px rgba(2, 6, 23, 0.2);
  --acg-shadow-e11: 0 44px 124px rgba(2, 6, 23, 0.24);
  --acg-shadow-e12: 0 62px 168px rgba(2, 6, 23, 0.28);
  --text: #0b0f14;
  --muted: rgba(15, 23, 42, 0.62);
  --glass-border: rgba(15, 23, 42, 0.1);
  --glass-surface: linear-gradient(180deg, rgba(255, 255, 255, 0.84), rgba(255, 255, 255, 0.58));
  --glass-card-surface: linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.62));
  --fab-surface: linear-gradient(180deg, rgba(255, 255, 255, 0.78), rgba(255, 255, 255, 0.56));
  --toast-surface: linear-gradient(180deg, rgba(255, 255, 255, 0.88), rgba(255, 255, 255, 0.62));
  --bottom-nav-surface: linear-gradient(180deg, rgba(255, 255, 255, 0.82), rgba(255, 255, 255, 0.62));
  --bottom-nav-surface-phone: linear-gradient(180deg, rgba(255, 255, 255, 0.92), rgba(255, 255, 255, 0.84));
  --chip-surface: rgba(255, 255, 255, 0.55);
  --nav-icon-bg: rgba(15, 23, 42, 0.06);
  --nav-icon-fg: rgba(15, 23, 42, 0.92);
  --carousel-dot-bg: rgba(15, 23, 42, 0.18);
  --shadow-soft: 0 18px 55px rgba(2, 6, 23, 0.12);
  --shadow-card: 0 10px 28px rgba(2, 6, 23, 0.08);
  --shadow-card-hover: 0 22px 70px rgba(2, 6, 23, 0.14);
  --ring: rgb(var(--acg-accent-2-rgb) / 0.55);
  --ease-smooth: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-standard: cubic-bezier(0.2, 0.8, 0.2, 1);
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
  --dur-quick: 120ms;
  --dur-fast: 160ms;
  --dur: 220ms;
  --dur-slow: 700ms;
  --acg-bottom-nav-h: 0px;
}

/* 性能分级：低性能/省流量设备自动降级部分昂贵效果（保持质感但更稳更顺） */
:root[data-acg-perf="low"] {
  --acg-glass-blur: 10px;
  --acg-glass-sat: 1.14;
  --acg-glass-blur-phone: 8px;
  --acg-glass-sat-phone: 1.1;
  --acg-fab-blur: 12px;
  --acg-fab-sat: 1.14;
  --acg-border-pan-duration: 0ms;
  --acg-border-pan-scale: 180%;
  --shadow-soft: 0 14px 44px rgba(2, 6, 23, 0.1);
  --shadow-card: 0 8px 22px rgba(2, 6, 23, 0.07);
  --shadow-card-hover: 0 14px 44px rgba(2, 6, 23, 0.11);
}

/* Accent palettes (works in both light/dark theme) */
:root[data-acg-accent="neon"] {
  --acg-accent-rgb: 124 58 237;
  --acg-accent-2-rgb: 56 189 248;
  --acg-accent-3-rgb: 16 185 129;
}

:root[data-acg-accent="sakura"] {
  --acg-accent-rgb: 236 72 153;
  --acg-accent-2-rgb: 244 63 94;
  --acg-accent-3-rgb: 251 191 36;
}

:root[data-acg-accent="ocean"] {
  --acg-accent-rgb: 6 182 212;
  --acg-accent-2-rgb: 59 130 246;
  --acg-accent-3-rgb: 16 185 129;
}

:root[data-acg-accent="amber"] {
  --acg-accent-rgb: 245 158 11;
  --acg-accent-2-rgb: 249 115 22;
  --acg-accent-3-rgb: 59 130 246;
}

.acg-accent {
  accent-color: rgb(var(--acg-accent-rgb));
}

.acg-orb {
  will-change: transform;
  animation: acg-orb-float-a 18s var(--ease-smooth) infinite;
}

.acg-orb-a {
  background: rgb(var(--acg-accent-rgb) / 0.12);
}

.acg-orb-b {
  background: rgb(var(--acg-accent-2-rgb) / 0.12);
  animation-name: acg-orb-float-b;
  animation-duration: 22s;
}

@keyframes acg-orb-float-a {
  0% {
    transform: translate3d(0, 0, 0) scale(1);
  }
  50% {
    transform: translate3d(22px, 14px, 0) scale(1.06);
  }
  100% {
    transform: translate3d(0, 0, 0) scale(1);
  }
}

@keyframes acg-orb-float-b {
  0% {
    transform: translate3d(0, 0, 0) scale(1);
  }
  50% {
    transform: translate3d(-18px, -10px, 0) scale(1.08);
  }
  100% {
    transform: translate3d(0, 0, 0) scale(1);
  }
}

@media (prefers-reduced-motion: reduce) {
  .acg-orb {
    animation: none;
  }
}

.acg-dialog::backdrop {
  background: rgb(2 6 23 / 0.55);
  backdrop-filter: blur(10px) saturate(1.05);
  -webkit-backdrop-filter: blur(10px) saturate(1.05);
}

:root[data-acg-perf="low"] .acg-dialog::backdrop,
:root[data-acg-boot="1"] .acg-dialog::backdrop {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* 启动期降级：优先保证首帧渲染与交互稳定，再恢复玻璃 blur 等昂贵效果。 */
:root[data-acg-boot="1"] {
  --acg-glass-blur: 0px;
  --acg-glass-sat: 1;
  --acg-glass-blur-phone: 0px;
  --acg-glass-sat-phone: 1;
  --acg-fab-blur: 0px;
  --acg-fab-sat: 1;
  --acg-border-pan-duration: 0ms;
}

:root[data-acg-boot="1"] .acg-header-surface,
:root[data-acg-boot="1"] .glass,
:root[data-acg-boot="1"] .acg-icon-fab,
:root[data-acg-boot="1"] .acg-toast,
:root[data-acg-boot="1"] .acg-carousel-controls-inner,
:root[data-acg-boot="1"] .acg-carousel-nav,
:root[data-acg-boot="1"] .acg-cmdk-backdrop,
:root[data-acg-boot="1"] .acg-cmdk-panel {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* 启动期：关闭大面积 blur(filter) 以降低首屏 paint 成本（尤其移动端）。 */
:root[data-acg-boot="1"] .blur-3xl,
:root[data-acg-boot="1"] .blur-2xl,
:root[data-acg-boot="1"] .blur-xl {
  filter: none !important;
}

/* 低性能模式：持续关闭大面积 blur(filter)，优先保证滚动与输入流畅。 */
:root[data-acg-perf="low"] .blur-3xl,
:root[data-acg-perf="low"] .blur-2xl,
:root[data-acg-perf="low"] .blur-xl {
  filter: none !important;
}

:root[data-acg-boot="1"] body::before {
  opacity: 0;
}

:root[data-acg-boot="1"] body {
  background: linear-gradient(180deg, #f8faff 0%, #eef2ff 100%);
}

:root[data-acg-boot="1"][data-acg-theme="dark"] body {
  background: linear-gradient(180deg, #04070f 0%, #0a1224 100%);
}

@media (prefers-color-scheme: dark) {
  :root[data-acg-boot="1"]:not([data-acg-theme]) body,
  :root[data-acg-boot="1"][data-acg-theme="auto"] body {
    background: linear-gradient(180deg, #04070f 0%, #0a1224 100%);
  }
}

/* 滚动期降级：滚动时临时关闭高开销效果（停止滚动后恢复）。 */
:root[data-acg-scroll="1"] {
  --acg-glass-blur: 0px;
  --acg-glass-sat: 1;
  --acg-glass-blur-phone: 0px;
  --acg-glass-sat-phone: 1;
  --acg-fab-blur: 0px;
  --acg-fab-sat: 1;
  --acg-border-pan-duration: 0ms;
}

/* 滚动期：禁用固定层/大面积 backdrop-filter，避免滚动合成掉帧。 */
:root[data-acg-scroll="1"] .acg-header-surface,
:root[data-acg-scroll="1"] .glass,
:root[data-acg-scroll="1"] .acg-icon-fab,
:root[data-acg-scroll="1"] .acg-toast,
:root[data-acg-scroll="1"] .acg-carousel-controls-inner,
:root[data-acg-scroll="1"] .acg-carousel-nav,
:root[data-acg-scroll="1"] .acg-cmdk-backdrop,
:root[data-acg-scroll="1"] .acg-cmdk-panel {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

:root[data-acg-scroll="1"] .acg-header-surface {
  background: rgba(255, 255, 255, 0.7) !important;
}

:root[data-acg-scroll="1"][data-acg-theme="dark"] .acg-header-surface {
  background: rgba(2, 6, 23, 0.74) !important;
}

@media (prefers-color-scheme: dark) {
  :root[data-acg-scroll="1"]:not([data-acg-theme]) .acg-header-surface,
  :root[data-acg-scroll="1"][data-acg-theme="auto"] .acg-header-surface {
    background: rgba(2, 6, 23, 0.74) !important;
  }
}

/* 低性能设备：Toast/轮播控件也不要用 blur（更稳）。 */
:root[data-acg-perf="low"] .acg-toast,
:root[data-acg-perf="low"] .acg-carousel-controls-inner,
:root[data-acg-perf="low"] .acg-carousel-nav {
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

/* 暗黑模式：
  - data-acg-theme="dark"：强制暗黑
  - data-acg-theme="light"：强制浅色
  - data-acg-theme="auto" / 未设置：跟随系统 prefers-color-scheme
*/
:root[data-acg-theme="dark"] {
  color-scheme: dark;
  --acg-border-gradient: linear-gradient(
    135deg,
    rgba(129, 140, 248, 0.68),
    rgba(14, 165, 233, 0.45),
    rgba(16, 185, 129, 0.34)
  );
  --acg-shadow-e1: 0 1px 2px rgba(0, 0, 0, 0.32), 0 1px 0 rgba(255, 255, 255, 0.06) inset;
  --acg-shadow-e2: 0 4px 16px rgba(0, 0, 0, 0.34), 0 1px 0 rgba(255, 255, 255, 0.05) inset;
  --acg-shadow-e3: 0 12px 34px rgba(0, 0, 0, 0.36);
  --acg-shadow-e4: 0 16px 44px rgba(0, 0, 0, 0.38);
  --acg-shadow-e6: 0 20px 60px rgba(0, 0, 0, 0.4);
  --acg-shadow-e7: 0 28px 84px rgba(0, 0, 0, 0.42);
  --acg-shadow-e10: 0 38px 120px rgba(0, 0, 0, 0.5);
  --acg-shadow-e11: 0 50px 150px rgba(0, 0, 0, 0.56);
  --acg-shadow-e12: 0 70px 190px rgba(0, 0, 0, 0.62);
  --text: rgba(248, 250, 252, 0.92);
  --muted: rgba(226, 232, 240, 0.68);
  --glass-border: rgba(148, 163, 184, 0.18);
  --glass-surface: linear-gradient(180deg, rgba(15, 23, 42, 0.78), rgba(2, 6, 23, 0.62));
  --glass-card-surface: linear-gradient(180deg, rgba(30, 41, 59, 0.72), rgba(2, 6, 23, 0.6));
  --fab-surface: linear-gradient(180deg, rgba(30, 41, 59, 0.78), rgba(2, 6, 23, 0.66));
  --toast-surface: linear-gradient(180deg, rgba(30, 41, 59, 0.78), rgba(2, 6, 23, 0.66));
  --bottom-nav-surface: linear-gradient(180deg, rgba(2, 6, 23, 0.78), rgba(2, 6, 23, 0.58));
  --bottom-nav-surface-phone: linear-gradient(180deg, rgba(2, 6, 23, 0.88), rgba(2, 6, 23, 0.72));
  --chip-surface: rgba(15, 23, 42, 0.58);
  --nav-icon-bg: rgba(148, 163, 184, 0.14);
  --nav-icon-fg: rgba(248, 250, 252, 0.92);
  --carousel-dot-bg: rgba(148, 163, 184, 0.24);
  --shadow-soft: 0 20px 70px rgba(0, 0, 0, 0.42);
  --shadow-card: 0 14px 44px rgba(0, 0, 0, 0.32);
  --shadow-card-hover: 0 28px 90px rgba(0, 0, 0, 0.46);
  --ring: rgba(56, 189, 248, 0.62);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-acg-theme]),
  :root[data-acg-theme="auto"] {
    color-scheme: dark;
    --acg-border-gradient: linear-gradient(
      135deg,
      rgba(129, 140, 248, 0.68),
      rgba(14, 165, 233, 0.45),
      rgba(16, 185, 129, 0.34)
    );
    --acg-shadow-e1: 0 1px 2px rgba(0, 0, 0, 0.32), 0 1px 0 rgba(255, 255, 255, 0.06) inset;
    --acg-shadow-e2: 0 4px 16px rgba(0, 0, 0, 0.34), 0 1px 0 rgba(255, 255, 255, 0.05) inset;
    --acg-shadow-e3: 0 12px 34px rgba(0, 0, 0, 0.36);
    --acg-shadow-e4: 0 16px 44px rgba(0, 0, 0, 0.38);
    --acg-shadow-e6: 0 20px 60px rgba(0, 0, 0, 0.4);
    --acg-shadow-e7: 0 28px 84px rgba(0, 0, 0, 0.42);
    --acg-shadow-e10: 0 38px 120px rgba(0, 0, 0, 0.5);
    --acg-shadow-e11: 0 50px 150px rgba(0, 0, 0, 0.56);
    --acg-shadow-e12: 0 70px 190px rgba(0, 0, 0, 0.62);
    --text: rgba(248, 250, 252, 0.92);
    --muted: rgba(226, 232, 240, 0.68);
    --glass-border: rgba(148, 163, 184, 0.18);
    --glass-surface: linear-gradient(180deg, rgba(15, 23, 42, 0.78), rgba(2, 6, 23, 0.62));
    --glass-card-surface: linear-gradient(180deg, rgba(30, 41, 59, 0.72), rgba(2, 6, 23, 0.6));
    --fab-surface: linear-gradient(180deg, rgba(30, 41, 59, 0.78), rgba(2, 6, 23, 0.66));
    --toast-surface: linear-gradient(180deg, rgba(30, 41, 59, 0.78), rgba(2, 6, 23, 0.66));
    --bottom-nav-surface: linear-gradient(180deg, rgba(2, 6, 23, 0.78), rgba(2, 6, 23, 0.58));
    --bottom-nav-surface-phone: linear-gradient(180deg, rgba(2, 6, 23, 0.88), rgba(2, 6, 23, 0.72));
    --chip-surface: rgba(15, 23, 42, 0.58);
    --nav-icon-bg: rgba(148, 163, 184, 0.14);
    --nav-icon-fg: rgba(248, 250, 252, 0.92);
    --carousel-dot-bg: rgba(148, 163, 184, 0.24);
    --shadow-soft: 0 20px 70px rgba(0, 0, 0, 0.42);
    --shadow-card: 0 14px 44px rgba(0, 0, 0, 0.32);
    --shadow-card-hover: 0 28px 90px rgba(0, 0, 0, 0.46);
    --ring: rgba(56, 189, 248, 0.62);
  }
}

/* 暗黑模式：对 Tailwind 常用色阶做轻量覆写（避免大面积重写模板） */
:root[data-acg-theme="dark"] .text-slate-950 {
  color: rgba(248, 250, 252, 0.92);
}
:root[data-acg-theme="dark"] .text-slate-800 {
  color: rgba(241, 245, 249, 0.92);
}
:root[data-acg-theme="dark"] .text-slate-700 {
  color: rgba(226, 232, 240, 0.84);
}
:root[data-acg-theme="dark"] .text-slate-600 {
  color: rgba(226, 232, 240, 0.68);
}
:root[data-acg-theme="dark"] .text-slate-500 {
  color: rgba(148, 163, 184, 0.82);
}
:root[data-acg-theme="dark"] .text-slate-400 {
  color: rgba(148, 163, 184, 0.74);
}
:root[data-acg-theme="dark"] .text-emerald-800 {
  color: rgba(167, 243, 208, 0.92);
}
:root[data-acg-theme="dark"] .text-rose-800 {
  color: rgba(254, 202, 202, 0.92);
}

:root[data-acg-theme="dark"] .border-slate-900\/10 {
  border-color: rgba(148, 163, 184, 0.18);
}
:root[data-acg-theme="dark"] .border-slate-900\/20 {
  border-color: rgba(148, 163, 184, 0.26);
}
:root[data-acg-theme="dark"] .border-rose-600\/20 {
  border-color: rgba(251, 113, 133, 0.28);
}

:root[data-acg-theme="dark"] .bg-white\/35 {
  background-color: rgba(2, 6, 23, 0.35);
}
:root[data-acg-theme="dark"] .bg-white\/45 {
  background-color: rgba(15, 23, 42, 0.52);
}
:root[data-acg-theme="dark"] .bg-white\/50 {
  background-color: rgba(15, 23, 42, 0.56);
}
:root[data-acg-theme="dark"] .bg-white\/55 {
  background-color: rgba(15, 23, 42, 0.6);
}
:root[data-acg-theme="dark"] .bg-white\/60 {
  background-color: rgba(15, 23, 42, 0.64);
}
:root[data-acg-theme="dark"] .bg-white\/65 {
  background-color: rgba(30, 41, 59, 0.62);
}
:root[data-acg-theme="dark"] .bg-white\/70 {
  background-color: rgba(30, 41, 59, 0.66);
}
:root[data-acg-theme="dark"] .bg-white\/75 {
  background-color: rgba(30, 41, 59, 0.7);
}
:root[data-acg-theme="dark"] .bg-white\/80 {
  background-color: rgba(30, 41, 59, 0.74);
}
:root[data-acg-theme="dark"] .bg-rose-500\/10 {
  background-color: rgba(244, 63, 94, 0.14);
}

:root[data-acg-theme="dark"] .hover\:bg-white\/60:hover {
  background-color: rgba(30, 41, 59, 0.68);
}
:root[data-acg-theme="dark"] .hover\:bg-white\/65:hover {
  background-color: rgba(30, 41, 59, 0.72);
}
:root[data-acg-theme="dark"] .hover\:bg-white\/70:hover {
  background-color: rgba(30, 41, 59, 0.74);
}
:root[data-acg-theme="dark"] .hover\:bg-white\/75:hover {
  background-color: rgba(30, 41, 59, 0.78);
}
:root[data-acg-theme="dark"] .hover\:bg-white\/80:hover {
  background-color: rgba(30, 41, 59, 0.82);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-acg-theme]) .text-slate-950,
  :root[data-acg-theme="auto"] .text-slate-950 {
    color: rgba(248, 250, 252, 0.92);
  }
  :root:not([data-acg-theme]) .text-slate-800,
  :root[data-acg-theme="auto"] .text-slate-800 {
    color: rgba(241, 245, 249, 0.92);
  }
  :root:not([data-acg-theme]) .text-slate-700,
  :root[data-acg-theme="auto"] .text-slate-700 {
    color: rgba(226, 232, 240, 0.84);
  }
  :root:not([data-acg-theme]) .text-slate-600,
  :root[data-acg-theme="auto"] .text-slate-600 {
    color: rgba(226, 232, 240, 0.68);
  }
  :root:not([data-acg-theme]) .text-slate-500,
  :root[data-acg-theme="auto"] .text-slate-500 {
    color: rgba(148, 163, 184, 0.82);
  }
  :root:not([data-acg-theme]) .text-slate-400,
  :root[data-acg-theme="auto"] .text-slate-400 {
    color: rgba(148, 163, 184, 0.74);
  }
  :root:not([data-acg-theme]) .text-emerald-800,
  :root[data-acg-theme="auto"] .text-emerald-800 {
    color: rgba(167, 243, 208, 0.92);
  }
  :root:not([data-acg-theme]) .text-rose-800,
  :root[data-acg-theme="auto"] .text-rose-800 {
    color: rgba(254, 202, 202, 0.92);
  }

  :root:not([data-acg-theme]) .border-slate-900\/10,
  :root[data-acg-theme="auto"] .border-slate-900\/10 {
    border-color: rgba(148, 163, 184, 0.18);
  }
  :root:not([data-acg-theme]) .border-slate-900\/20,
  :root[data-acg-theme="auto"] .border-slate-900\/20 {
    border-color: rgba(148, 163, 184, 0.26);
  }
  :root:not([data-acg-theme]) .border-rose-600\/20,
  :root[data-acg-theme="auto"] .border-rose-600\/20 {
    border-color: rgba(251, 113, 133, 0.28);
  }

  :root:not([data-acg-theme]) .bg-white\/35,
  :root[data-acg-theme="auto"] .bg-white\/35 {
    background-color: rgba(2, 6, 23, 0.35);
  }
  :root:not([data-acg-theme]) .bg-white\/45,
  :root[data-acg-theme="auto"] .bg-white\/45 {
    background-color: rgba(15, 23, 42, 0.52);
  }
  :root:not([data-acg-theme]) .bg-white\/50,
  :root[data-acg-theme="auto"] .bg-white\/50 {
    background-color: rgba(15, 23, 42, 0.56);
  }
  :root:not([data-acg-theme]) .bg-white\/55,
  :root[data-acg-theme="auto"] .bg-white\/55 {
    background-color: rgba(15, 23, 42, 0.6);
  }
  :root:not([data-acg-theme]) .bg-white\/60,
  :root[data-acg-theme="auto"] .bg-white\/60 {
    background-color: rgba(15, 23, 42, 0.64);
  }
  :root:not([data-acg-theme]) .bg-white\/65,
  :root[data-acg-theme="auto"] .bg-white\/65 {
    background-color: rgba(30, 41, 59, 0.62);
  }
  :root:not([data-acg-theme]) .bg-white\/70,
  :root[data-acg-theme="auto"] .bg-white\/70 {
    background-color: rgba(30, 41, 59, 0.66);
  }
  :root:not([data-acg-theme]) .bg-white\/75,
  :root[data-acg-theme="auto"] .bg-white\/75 {
    background-color: rgba(30, 41, 59, 0.7);
  }
  :root:not([data-acg-theme]) .bg-white\/80,
  :root[data-acg-theme="auto"] .bg-white\/80 {
    background-color: rgba(30, 41, 59, 0.74);
  }
  :root:not([data-acg-theme]) .bg-rose-500\/10,
  :root[data-acg-theme="auto"] .bg-rose-500\/10 {
    background-color: rgba(244, 63, 94, 0.14);
  }

  :root:not([data-acg-theme]) .hover\:bg-white\/60:hover,
  :root[data-acg-theme="auto"] .hover\:bg-white\/60:hover {
    background-color: rgba(30, 41, 59, 0.68);
  }
  :root:not([data-acg-theme]) .hover\:bg-white\/65:hover,
  :root[data-acg-theme="auto"] .hover\:bg-white\/65:hover {
    background-color: rgba(30, 41, 59, 0.72);
  }
  :root:not([data-acg-theme]) .hover\:bg-white\/70:hover,
  :root[data-acg-theme="auto"] .hover\:bg-white\/70:hover {
    background-color: rgba(30, 41, 59, 0.74);
  }
  :root:not([data-acg-theme]) .hover\:bg-white\/75:hover,
  :root[data-acg-theme="auto"] .hover\:bg-white\/75:hover {
    background-color: rgba(30, 41, 59, 0.78);
  }
  :root:not([data-acg-theme]) .hover\:bg-white\/80:hover,
  :root[data-acg-theme="auto"] .hover\:bg-white\/80:hover {
    background-color: rgba(30, 41, 59, 0.82);
  }
}

@media (max-width: 640px) {
  :root {
    /* 移动端性能优先：降低阴影开销，滚动更顺滑 */
    --shadow-soft: 0 14px 40px rgba(2, 6, 23, 0.1);
    --shadow-card: 0 8px 18px rgba(2, 6, 23, 0.08);
    --shadow-card-hover: 0 16px 55px rgba(2, 6, 23, 0.12);
  }
}

@media (max-width: 640px) {
  :root[data-acg-theme="dark"] {
    --shadow-soft: 0 18px 60px rgba(0, 0, 0, 0.36);
    --shadow-card: 0 12px 40px rgba(0, 0, 0, 0.3);
    --shadow-card-hover: 0 24px 85px rgba(0, 0, 0, 0.42);
  }
}

@media (prefers-color-scheme: dark) and (max-width: 640px) {
  :root:not([data-acg-theme]),
  :root[data-acg-theme="auto"] {
    --shadow-soft: 0 18px 60px rgba(0, 0, 0, 0.36);
    --shadow-card: 0 12px 40px rgba(0, 0, 0, 0.3);
    --shadow-card-hover: 0 24px 85px rgba(0, 0, 0, 0.42);
  }
}

html[data-acg-device="phone"] {
  /* 手机端性能优先：即使启用了“桌面站点/大视口”，也应保持移动端阴影与布局节奏 */
  --shadow-soft: 0 14px 40px rgba(2, 6, 23, 0.1);
  --shadow-card: 0 8px 18px rgba(2, 6, 23, 0.08);
  --shadow-card-hover: 0 16px 55px rgba(2, 6, 23, 0.12);
  --acg-bottom-nav-h: 78px;
}

html,
body {
  height: 100%;
}

body {
  margin: 0;
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  line-height: var(--acg-leading);
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
  font-family: var(--font-sans);
  background: radial-gradient(1200px 800px at 12% 8%, rgba(79, 70, 229, 0.18), transparent 55%),
    radial-gradient(1000px 700px at 88% 18%, rgba(14, 165, 233, 0.16), transparent 55%),
    radial-gradient(1100px 900px at 30% 100%, rgba(16, 185, 129, 0.12), transparent 60%),
    linear-gradient(180deg, #f8faff 0%, #eef2ff 100%);
}

h1,
h2,
h3,
h4,
.acg-display {
  font-family: var(--font-display);
  letter-spacing: -0.01em;
}

:root[data-acg-theme="dark"] body {
  background: radial-gradient(1200px 800px at 12% 12%, rgba(79, 70, 229, 0.26), transparent 60%),
    radial-gradient(1000px 700px at 90% 18%, rgba(14, 165, 233, 0.22), transparent 60%),
    radial-gradient(1100px 900px at 30% 100%, rgba(16, 185, 129, 0.16), transparent 65%),
    linear-gradient(180deg, #04070f 0%, #0a1224 100%);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-acg-theme]) body,
  :root[data-acg-theme="auto"] body {
    background: radial-gradient(1200px 800px at 12% 12%, rgba(79, 70, 229, 0.26), transparent 60%),
      radial-gradient(1000px 700px at 90% 18%, rgba(14, 165, 233, 0.22), transparent 60%),
      radial-gradient(1100px 900px at 30% 100%, rgba(16, 185, 129, 0.16), transparent 65%),
      linear-gradient(180deg, #04070f 0%, #0a1224 100%);
  }
}

/* 噪点纹理层（纯 CSS/SVG data url，不引入外部资源） */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0.06;
  /* 避免 feTurbulence 带来的重绘/卡顿：用多层点阵伪随机噪点替代 */
  background-image: radial-gradient(rgba(15, 23, 42, 0.28) 0.6px, transparent 0.7px),
    radial-gradient(rgba(15, 23, 42, 0.18) 0.8px, transparent 0.9px),
    radial-gradient(rgba(15, 23, 42, 0.12) 0.5px, transparent 0.6px);
  background-size:
    3px 3px,
    4px 4px,
    5px 5px;
  background-position:
    0 0,
    1px 1px,
    2px 2px;
}

:root[data-acg-theme="dark"] body::before {
  opacity: 0.065;
  background-image: radial-gradient(rgba(226, 232, 240, 0.18) 0.6px, transparent 0.7px),
    radial-gradient(rgba(226, 232, 240, 0.12) 0.8px, transparent 0.9px),
    radial-gradient(rgba(226, 232, 240, 0.08) 0.5px, transparent 0.6px);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-acg-theme]) body::before,
  :root[data-acg-theme="auto"] body::before {
    opacity: 0.065;
    background-image: radial-gradient(rgba(226, 232, 240, 0.18) 0.6px, transparent 0.7px),
      radial-gradient(rgba(226, 232, 240, 0.12) 0.8px, transparent 0.9px),
      radial-gradient(rgba(226, 232, 240, 0.08) 0.5px, transparent 0.6px);
  }
}

html[data-acg-device="phone"] body::before {
  /* 手机端进一步降噪：减少层数与透明度，降低滚动/合成压力 */
  opacity: 0.045;
  background-image: radial-gradient(rgba(15, 23, 42, 0.22) 0.7px, transparent 0.8px);
  background-size: 4px 4px;
  background-position: 0 0;
}

html[data-acg-device="phone"][data-acg-theme="dark"] body::before {
  opacity: 0.052;
  background-image: radial-gradient(rgba(226, 232, 240, 0.14) 0.7px, transparent 0.8px);
  background-size: 4px 4px;
  background-position: 0 0;
}

@media (prefers-color-scheme: dark) {
  html[data-acg-device="phone"]:not([data-acg-theme]) body::before,
  html[data-acg-device="phone"][data-acg-theme="auto"] body::before {
    opacity: 0.052;
    background-image: radial-gradient(rgba(226, 232, 240, 0.14) 0.7px, transparent 0.8px);
    background-size: 4px 4px;
    background-position: 0 0;
  }
}

/* 网络状态指示（轻量）：请求进行中显示细进度条；慢网时用偏暖色提示。 */
body::after {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  pointer-events: none;
  z-index: 60;
  opacity: 0;
  transform: translateX(-100%);
  background: linear-gradient(90deg, transparent, rgba(124, 58, 237, 0.45), transparent);
}

html[data-acg-busy="true"] body::after {
  opacity: 0.9;
  animation: acg-net-progress 1.15s ease-in-out infinite;
}

html[data-acg-net="slow"] body::after {
  height: 3px;
  background: linear-gradient(90deg, transparent, rgba(245, 158, 11, 0.55), transparent);
}

@media (prefers-reduced-motion: reduce) {
  html[data-acg-busy="true"] body::after {
    animation: none;
    opacity: 0.65;
    transform: translateX(0);
  }
}

@keyframes acg-net-progress {
  0% {
    transform: translateX(-100%);
  }
  50% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(100%);
  }
}

/* 页面转场：优先使用 View Transitions（支持时更丝滑）；否则由客户端脚本降级到 WAAPI 淡入淡出 */
@supports (view-transition-name: acg-main) {
  ::view-transition-old(acg-main) {
    animation: acg-vt-main-out var(--dur-slow) var(--ease-smooth) both;
  }

  ::view-transition-new(acg-main) {
    animation: acg-vt-main-in var(--dur-slow) var(--ease-smooth) both;
  }

  ::view-transition-old(acg-header) {
    animation: acg-vt-header-out calc(var(--dur) * 1.4) var(--ease-standard) both;
  }

  ::view-transition-new(acg-header) {
    animation: acg-vt-header-in calc(var(--dur) * 1.4) var(--ease-standard) both;
  }
}

@keyframes acg-vt-main-out {
  from {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  to {
    opacity: 0;
    transform: translateY(10px) scale(0.985);
  }
}

@keyframes acg-vt-main-in {
  from {
    opacity: 0;
    transform: translateY(-8px) scale(1.01);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes acg-vt-header-out {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0.92;
    transform: translateY(-4px);
  }
}

@keyframes acg-vt-header-in {
  from {
    opacity: 0.92;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@media (prefers-reduced-motion: reduce) {
  @supports (view-transition-name: acg-main) {
    ::view-transition-old(acg-main),
    ::view-transition-new(acg-main),
    ::view-transition-old(acg-header),
    ::view-transition-new(acg-header) {
      animation: none !important;
    }
  }
}

@media (max-width: 1023px) {
  :root {
    /* 移动端底部导航默认高度（含 safe-area）。用于把 FAB/Toast 顶上去 */
    --acg-bottom-nav-h: 78px;
  }
}

::selection {
  background: rgb(var(--acg-accent-rgb) / 0.22);
}

/* 跨页视图过渡（支持的浏览器会自动丝滑，其他浏览器无影响） */
@view-transition {
  navigation: auto;
}

::view-transition-old(root),
::view-transition-new(root) {
  animation-duration: var(--dur);
  animation-timing-function: var(--ease-smooth);
}

/* 标题断行：更“杂志感”，避免单词/短语孤悬 */
h1,
h2,
h3 {
  text-wrap: balance;
}

p {
  text-wrap: pretty;
}

/* 可访问性：键盘焦点可见 */
:focus-visible {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
}

/* 可访问性：跳到主内容（仅键盘聚焦时出现） */
.acg-skip-link {
  position: fixed;
  left: clamp(12px, 2vw, 18px);
  top: clamp(12px, 2vw, 18px);
  z-index: 9999;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 12px;
  border-radius: 14px;
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 0.02em;
  text-decoration: none;
  transform: translateY(-160%);
  opacity: 0;
  transition:
    transform var(--dur-fast) var(--ease-spring),
    opacity var(--dur-fast) ease;
}

.acg-skip-link:focus,
.acg-skip-link:focus-visible {
  transform: translateY(0);
  opacity: 1;
}

@media (prefers-reduced-motion: reduce) {
  .acg-skip-link {
    transition: none;
  }
}

img {
  display: block;
  max-width: 100%;
}

/* 超长文本：柔和截断（支持 mask 的浏览器会使用渐变遮罩） */
.acg-fade-truncate {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

@supports (-webkit-mask-image: linear-gradient(90deg, #000, transparent)) or
  (mask-image: linear-gradient(90deg, #000, transparent)) {
  .acg-fade-truncate {
    text-overflow: clip;
    -webkit-mask-image: linear-gradient(90deg, #000 0, #000 calc(100% - 14px), transparent 100%);
    mask-image: linear-gradient(90deg, #000 0, #000 calc(100% - 14px), transparent 100%);
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
  }
}

/* 顶部导航背景：大屏允许 blur，小屏性能优先 */
.acg-header-surface {
  background: rgba(255, 255, 255, 0.7);
}

@media (min-width: 1024px) {
  .acg-header-surface {
    background: rgba(255, 255, 255, 0.35);
    backdrop-filter: blur(22px);
    -webkit-backdrop-filter: blur(22px);
  }
}

:root[data-acg-theme="dark"] .acg-header-surface {
  background: rgba(2, 6, 23, 0.74);
}

@media (min-width: 1024px) {
  :root[data-acg-theme="dark"] .acg-header-surface {
    background: rgba(2, 6, 23, 0.42);
    backdrop-filter: blur(22px);
    -webkit-backdrop-filter: blur(22px);
  }
}

@media (prefers-color-scheme: dark) {
  :root:not([data-acg-theme]) .acg-header-surface,
  :root[data-acg-theme="auto"] .acg-header-surface {
    background: rgba(2, 6, 23, 0.74);
  }
}

@media (prefers-color-scheme: dark) and (min-width: 1024px) {
  :root:not([data-acg-theme]) .acg-header-surface,
  :root[data-acg-theme="auto"] .acg-header-surface {
    background: rgba(2, 6, 23, 0.42);
    backdrop-filter: blur(22px);
    -webkit-backdrop-filter: blur(22px);
  }
}

/* 玻璃卡片基础 */
.glass {
  border: 1px solid transparent;
  background:
    var(--glass-surface) padding-box,
    var(--acg-border-gradient) border-box;
  backdrop-filter: blur(var(--acg-glass-blur)) saturate(var(--acg-glass-sat));
  -webkit-backdrop-filter: blur(var(--acg-glass-blur)) saturate(var(--acg-glass-sat));
  box-shadow: var(--acg-shadow-e5);
}

html[data-acg-device="phone"] .glass {
  /* 手机端降低 blur 开销：保持玻璃质感，但更稳更顺 */
  backdrop-filter: blur(var(--acg-glass-blur-phone)) saturate(var(--acg-glass-sat-phone));
  -webkit-backdrop-filter: blur(var(--acg-glass-blur-phone)) saturate(var(--acg-glass-sat-phone));
}

/* 列表卡片：保留“玻璃感”，但不使用昂贵的 backdrop-filter（大列表更顺滑） */
.glass-card {
  border: 1px solid transparent;
  background:
    var(--glass-card-surface) padding-box,
    var(--acg-border-gradient) border-box;
  box-shadow: var(--acg-shadow-e5);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

@media (hover: hover) {
  /* 动态渐变边框：仅 hover 时启动动画，避免大面积常驻动画影响合成性能 */
  .glass,
  .glass-card {
    background-position:
      0 0,
      0% 50%;
    background-size:
      auto,
      var(--acg-border-pan-scale) var(--acg-border-pan-scale);
  }

  .glass:hover,
  .glass-card:hover {
    animation: acg-border-pan var(--acg-border-pan-duration) var(--ease-smooth) infinite;
  }
}

@media (prefers-reduced-motion: reduce) {
  .glass:hover,
  .glass-card:hover {
    animation: none;
  }
}

:root[data-acg-perf="low"] .glass:hover,
:root[data-acg-perf="low"] .glass-card:hover {
  animation: none !important;
}

@keyframes acg-border-pan {
  0% {
    background-position:
      0 0,
      0% 50%;
  }
  50% {
    background-position:
      0 0,
      100% 50%;
  }
  100% {
    background-position:
      0 0,
      0% 50%;
  }
}

/* 少量“悬浮操作”按钮：允许更精致的玻璃质感（数量很少，不会拖慢大列表） */
.acg-icon-fab {
  border: 1px solid transparent;
  background:
    var(--fab-surface) padding-box,
    var(--acg-border-gradient) border-box;
  box-shadow: var(--acg-shadow-e7);
  backdrop-filter: blur(var(--acg-fab-blur)) saturate(var(--acg-fab-sat));
  -webkit-backdrop-filter: blur(var(--acg-fab-blur)) saturate(var(--acg-fab-sat));
}

html[data-acg-device="phone"] .acg-icon-fab {
  backdrop-filter: blur(var(--acg-glass-blur-phone)) saturate(var(--acg-glass-sat-phone));
  -webkit-backdrop-filter: blur(var(--acg-glass-blur-phone)) saturate(var(--acg-glass-sat-phone));
  box-shadow: var(--acg-shadow-e6);
}

/* 视觉系统 vNext：语义化栅格 + 阴影层级（Tailwind 之外也可复用） */
.acg-grid-12 {
  display: grid;
  grid-template-columns: repeat(var(--acg-grid-cols), minmax(0, 1fr));
  gap: var(--acg-grid-gap);
}

.acg-grid-12[data-gutter="on"] {
  padding-left: var(--acg-grid-gutter);
  padding-right: var(--acg-grid-gutter);
}

.acg-col {
  grid-column: span var(--acg-col-span, 12) / span var(--acg-col-span, 12);
}

.acg-col-span-1 {
  --acg-col-span: 1;
}
.acg-col-span-2 {
  --acg-col-span: 2;
}
.acg-col-span-3 {
  --acg-col-span: 3;
}
.acg-col-span-4 {
  --acg-col-span: 4;
}
.acg-col-span-5 {
  --acg-col-span: 5;
}
.acg-col-span-6 {
  --acg-col-span: 6;
}
.acg-col-span-7 {
  --acg-col-span: 7;
}
.acg-col-span-8 {
  --acg-col-span: 8;
}
.acg-col-span-9 {
  --acg-col-span: 9;
}
.acg-col-span-10 {
  --acg-col-span: 10;
}
.acg-col-span-11 {
  --acg-col-span: 11;
}
.acg-col-span-12 {
  --acg-col-span: 12;
}

.acg-elev-1 {
  box-shadow: var(--acg-shadow-e1);
}
.acg-elev-2 {
  box-shadow: var(--acg-shadow-e2);
}
.acg-elev-3 {
  box-shadow: var(--acg-shadow-e3);
}
.acg-elev-4 {
  box-shadow: var(--acg-shadow-e4);
}
.acg-elev-5 {
  box-shadow: var(--acg-shadow-e5);
}
.acg-elev-6 {
  box-shadow: var(--acg-shadow-e6);
}
.acg-elev-7 {
  box-shadow: var(--acg-shadow-e7);
}
.acg-elev-8 {
  box-shadow: var(--acg-shadow-e8);
}
.acg-elev-9 {
  box-shadow: var(--acg-shadow-e9);
}
.acg-elev-10 {
  box-shadow: var(--acg-shadow-e10);
}
.acg-elev-11 {
  box-shadow: var(--acg-shadow-e11);
}
.acg-elev-12 {
  box-shadow: var(--acg-shadow-e12);
}

/* 阅读模式排版（全文预览）：让“抓取到的 Markdown/列表页”更像可读文章 */
.acg-prose {
  font-size: 14px;
  line-height: 1.75;
  color: var(--text);
  max-width: 72ch;
  margin-left: auto;
  margin-right: auto;
  overflow-wrap: anywhere;
  word-break: break-word;
}

.acg-prose[data-acg-prose-kind="index"] {
  max-width: none;
}

@media (min-width: 640px) {
  .acg-prose {
    font-size: 15px;
  }
}

.acg-prose strong {
  font-weight: 900;
  color: var(--text);
}

.acg-prose em {
  font-style: italic;
  color: var(--text);
}

.acg-prose > * + * {
  margin-top: 0.95em;
}

.acg-prose h1,
.acg-prose h2,
.acg-prose h3,
.acg-prose h4,
.acg-prose h5,
.acg-prose h6 {
  margin-top: 1.4em;
  margin-bottom: 0.55em;
  font-weight: 900;
  letter-spacing: -0.01em;
  color: rgba(15, 23, 42, 0.96);
}

.acg-prose h1 {
  font-size: 1.35em;
}
.acg-prose h2 {
  font-size: 1.22em;
}
.acg-prose h3 {
  font-size: 1.12em;
}
.acg-prose h4 {
  font-size: 1.05em;
}

.acg-prose[data-acg-prose-kind="index"] h4 {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 8px;
  padding: 9px 10px;
  border-radius: 18px;
  border: 1px solid rgba(15, 23, 42, 0.1);
  background: rgba(255, 255, 255, 0.55);
  box-shadow: 0 12px 32px rgba(2, 6, 23, 0.08);
}

.acg-prose[data-acg-prose-kind="index"] h4::before {
  content: "";
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: linear-gradient(135deg, rgba(124, 58, 237, 0.92), rgba(59, 130, 246, 0.78));
  box-shadow: 0 12px 30px rgba(124, 58, 237, 0.25);
}

/* index 模式：把“目录/大列表”按 H4 自动分区成可折叠卡片（更像资讯 App） */
.acg-prose-section {
  margin: 0.95em 0;
  border-radius: 18px;
  border: 1px solid rgba(15, 23, 42, 0.1);
  background: rgba(255, 255, 255, 0.52);
  box-shadow: 0 18px 52px rgba(2, 6, 23, 0.1);
  overflow: hidden;
}

.acg-prose-section-summary {
  list-style: none;
  cursor: pointer;
  user-select: none;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 14px;
  font-weight: 900;
  color: rgba(15, 23, 42, 0.96);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.72), rgba(255, 255, 255, 0.48));
}

.acg-prose-section-summary::-webkit-details-marker {
  display: none;
}

.acg-prose-section-summary::after {
  content: "";
  width: 10px;
  height: 10px;
  margin-left: 10px;
  border-right: 2px solid rgba(15, 23, 42, 0.45);
  border-bottom: 2px solid rgba(15, 23, 42, 0.45);
  transform: rotate(45deg);
  transition:
    transform 160ms ease,
    opacity 160ms ease;
  opacity: 0.9;
}

.acg-prose-section[open] > .acg-prose-section-summary::after {
  transform: rotate(-135deg);
  opacity: 0.75;
}

.acg-prose-section-count {
  margin-left: auto;
  min-width: 32px;
  height: 22px;
  padding: 0 8px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 999px;
  border: 1px solid rgba(15, 23, 42, 0.12);
  background: rgba(255, 255, 255, 0.7);
  color: rgba(15, 23, 42, 0.72);
  font-size: 11px;
  font-weight: 900;
  font-variant-numeric: tabular-nums;
  box-shadow: 0 10px 26px rgba(2, 6, 23, 0.08);
}

.acg-prose-section-body {
  padding: 12px 14px 14px;
}

html[data-acg-device="phone"] .acg-prose-section-summary {
  padding: 11px 12px;
}

html[data-acg-device="phone"] .acg-prose-section-body {
  padding: 11px 12px 12px;
}

.acg-prose a {
  color: rgba(124, 58, 237, 0.98);
  text-decoration: underline;
  text-decoration-color: rgba(124, 58, 237, 0.32);
  text-underline-offset: 3px;
  word-break: break-word;
}

.acg-prose a:hover {
  text-decoration-color: rgba(124, 58, 237, 0.55);
}

/* 纯链接：渲染成轻量“链接卡片”（不联网抓 title，避免拖慢） */
.acg-prose .acg-prose-autolink {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 16px;
  border: 1px solid rgba(15, 23, 42, 0.1);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.72), rgba(255, 255, 255, 0.52));
  box-shadow: 0 16px 46px rgba(2, 6, 23, 0.1);
  text-decoration: none;
  color: rgba(15, 23, 42, 0.94);
}

.acg-prose .acg-prose-autolink::before {
  content: "";
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: linear-gradient(135deg, rgba(124, 58, 237, 0.78), rgba(59, 130, 246, 0.55));
  box-shadow: 0 10px 22px rgba(124, 58, 237, 0.2);
  flex: 0 0 auto;
}

.acg-prose .acg-prose-autolink-text {
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.acg-prose .acg-prose-autolink-host {
  font-weight: 900;
  letter-spacing: -0.01em;
  line-height: 1.2;
}

.acg-prose .acg-prose-autolink-path {
  color: rgba(15, 23, 42, 0.65);
  font-size: 12px;
  line-height: 1.2;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.acg-prose .acg-prose-autolink:hover {
  border-color: rgba(124, 58, 237, 0.22);
  box-shadow: 0 18px 56px rgba(2, 6, 23, 0.12);
}

html[data-acg-device="phone"] .acg-prose .acg-prose-autolink {
  padding: 9px 11px;
  border-radius: 14px;
}

/* “标题 + URL”聚合条目：把重复的 URL 卡片压缩成一个可点击的嵌入条 */
.acg-prose .acg-prose-linkrow {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 10px;
  align-items: start;
  padding: 10px 12px;
  border-radius: 16px;
  border: 1px solid rgba(15, 23, 42, 0.1);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.72), rgba(255, 255, 255, 0.52));
  box-shadow: 0 16px 46px rgba(2, 6, 23, 0.1);
  text-decoration: none;
  color: rgba(15, 23, 42, 0.94);
}

.acg-prose .acg-prose-linkrow::before {
  content: "";
  width: 10px;
  height: 10px;
  border-radius: 999px;
  margin-top: 0.32em;
  background: linear-gradient(135deg, rgba(124, 58, 237, 0.78), rgba(59, 130, 246, 0.55));
  box-shadow: 0 10px 22px rgba(124, 58, 237, 0.2);
  flex: 0 0 auto;
}

.acg-prose .acg-prose-linkrow-title {
  font-weight: 900;
  letter-spacing: -0.01em;
  line-height: 1.3;
}

.acg-prose .acg-prose-linkrow-meta {
  margin-top: 2px;
  color: rgba(15, 23, 42, 0.65);
  font-size: 12px;
  line-height: 1.2;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.acg-prose .acg-prose-linkrow:hover {
  border-color: rgba(124, 58, 237, 0.22);
  box-shadow: 0 18px 56px rgba(2, 6, 23, 0.12);
}

html[data-acg-device="phone"] .acg-prose .acg-prose-linkrow {
  padding: 9px 11px;
  border-radius: 14px;
}

.acg-prose ul,
.acg-prose ol {
  margin: 0.65em 0;
}

/* list item 内部结构：由 reader 渲染器注入（用于“时间/日期/编号”前缀） */
.acg-prose-li-prefix {
  align-self: start;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.acg-prose-li-content {
  min-width: 0;
}

.acg-prose-time,
.acg-prose-date,
.acg-prose-ol {
  min-width: 58px;
  padding: 4px 9px;
  border-radius: 999px;
  border: 1px solid rgba(15, 23, 42, 0.1);
  background: rgba(255, 255, 255, 0.7);
  color: rgba(15, 23, 42, 0.72);
  font-size: 11px;
  font-weight: 900;
  letter-spacing: 0.01em;
  font-variant-numeric: tabular-nums;
  box-shadow: 0 10px 28px rgba(2, 6, 23, 0.08);
}

.acg-prose-date {
  min-width: 74px;
}

.acg-prose-dot {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  margin-top: 0.52em;
  background: linear-gradient(135deg, rgba(124, 58, 237, 0.78), rgba(59, 130, 246, 0.55));
  box-shadow: 0 10px 22px rgba(124, 58, 237, 0.2);
}

/* article：保留“传统列表”风格（不做卡片化） */
.acg-prose[data-acg-prose-kind="article"] ul,
.acg-prose[data-acg-prose-kind="article"] ol {
  padding-left: 1.25em;
}

.acg-prose[data-acg-prose-kind="article"] .acg-prose-li {
  margin: 0.35em 0;
}

.acg-prose[data-acg-prose-kind="article"] .acg-prose-li-prefix {
  display: none;
}

.acg-prose[data-acg-prose-kind="article"] .acg-prose-li-content {
  display: inline;
}

/* article：纯 URL 不做“卡片化”，保持轻量（否则正文里会出现一堆大块链接卡片，显得杂） */
.acg-prose[data-acg-prose-kind="article"] .acg-prose-autolink {
  display: inline;
  padding: 0;
  border: 0;
  background: none;
  box-shadow: none;
  text-decoration: underline;
  text-decoration-color: rgba(124, 58, 237, 0.32);
  text-underline-offset: 3px;
  color: rgba(124, 58, 237, 0.98);
}

.acg-prose[data-acg-prose-kind="article"] .acg-prose-autolink::before {
  display: none;
}

.acg-prose[data-acg-prose-kind="article"] .acg-prose-autolink-text {
  display: inline;
  flex-direction: row;
  gap: 0;
}

.acg-prose[data-acg-prose-kind="article"] .acg-prose-autolink-path {
  display: none;
}

/* index：新闻目录/列表页卡片化（更像资讯 App） */
.acg-prose[data-acg-prose-kind="index"] ul,
.acg-prose[data-acg-prose-kind="index"] ol {
  padding-left: 0;
  list-style: none;
  display: grid;
  gap: 10px;
}

.acg-prose[data-acg-prose-kind="index"] .acg-prose-li {
  margin: 0;
  padding: 12px 14px;
  border-radius: 18px;
  border: 1px solid rgba(15, 23, 42, 0.1);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.78), rgba(255, 255, 255, 0.56));
  box-shadow: 0 18px 55px rgba(2, 6, 23, 0.1);
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 10px;
  align-items: start;
}

/* index 模式下，dot 前缀只是装饰，且会与“链接卡片/嵌入条”的 dot 重复：隐藏并让内容占满 */
.acg-prose[data-acg-prose-kind="index"] .acg-prose-li-prefix.acg-prose-dot {
  display: none;
}

.acg-prose[data-acg-prose-kind="index"] .acg-prose-li-prefix.acg-prose-dot + .acg-prose-li-content {
  grid-column: 1 / -1;
}

html[data-acg-device="phone"] .acg-prose[data-acg-prose-kind="index"] .acg-prose-li {
  padding: 11px 12px;
  border-radius: 16px;
  box-shadow: 0 16px 46px rgba(2, 6, 23, 0.1);
}

.acg-prose[data-acg-prose-kind="index"] .acg-prose-li-content a {
  color: rgba(15, 23, 42, 0.94);
  font-weight: 900;
  text-decoration: none;
}

.acg-prose[data-acg-prose-kind="index"] .acg-prose-li-content a:hover {
  text-decoration: underline;
  text-decoration-color: rgba(124, 58, 237, 0.55);
}

.acg-prose hr {
  border: 0;
  border-top: 1px solid rgba(15, 23, 42, 0.1);
  margin: 1.2em 0;
}

.acg-prose blockquote {
  margin: 1em 0;
  padding: 0.2em 0 0.2em 1em;
  border-left: 3px solid rgba(124, 58, 237, 0.35);
  color: rgba(15, 23, 42, 0.78);
}

.acg-prose pre {
  margin: 1em 0;
  padding: 12px 14px;
  border-radius: 16px;
  border: 1px solid rgba(15, 23, 42, 0.1);
  background: rgba(15, 23, 42, 0.04);
  overflow: auto;
}

.acg-prose code {
  padding: 0.12em 0.42em;
  border-radius: 10px;
  border: 1px solid rgba(15, 23, 42, 0.1);
  background: rgba(15, 23, 42, 0.04);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New",
    monospace;
  font-size: 0.92em;
}

.acg-prose pre code {
  padding: 0;
  border: none;
  background: transparent;
  font-size: 12px;
}

.acg-prose img {
  max-width: 100%;
  height: auto;
  /* 文章页常会有多张配图：限制高度 + 降低阴影存在感，避免“整页大图墙”压过正文阅读 */
  max-height: 480px;
  margin-left: auto;
  margin-right: auto;
  border-radius: 18px;
  border: 1px solid rgba(15, 23, 42, 0.1);
  box-shadow: 0 14px 42px rgba(2, 6, 23, 0.08);
}

html[data-acg-device="phone"] .acg-prose img {
  max-height: 340px;
  border-radius: 16px;
  box-shadow: none;
}

.acg-prose .acg-prose-img-link {
  display: block;
  border-radius: 18px;
  overflow: hidden;
}

/* 多图：收敛成画廊网格，避免“整页大图淹没正文” */
.acg-prose .acg-prose-gallery {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(168px, 1fr));
  gap: 10px;
  margin: 1.05em 0;
}

html[data-acg-device="phone"] .acg-prose .acg-prose-gallery {
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.acg-prose .acg-prose-gallery .acg-prose-img-link {
  border-radius: 16px;
  box-shadow: 0 14px 40px rgba(2, 6, 23, 0.1);
}

.acg-prose .acg-prose-gallery img {
  width: 100%;
  height: 100%;
  max-height: none;
  aspect-ratio: 16 / 9;
  object-fit: cover;
  border-radius: 16px;
  box-shadow: none;
}

/* 全文预览长文：用 content-visibility 降低离屏渲染开销（尤其移动端） */
[data-fulltext-content] > * {
  content-visibility: auto;
  contain: layout paint style;
  contain-intrinsic-size: 220px;
}

[data-fulltext-content] > ul,
[data-fulltext-content] > ol {
  contain-intrinsic-size: 360px;
}

[data-fulltext-content] > pre,
[data-fulltext-content] > blockquote,
[data-fulltext-content] > table,
[data-fulltext-content] > details {
  contain-intrinsic-size: 320px;
}

[data-fulltext-content] > .acg-prose-gallery {
  contain-intrinsic-size: 520px;
}

@media (max-width: 640px) {
  [data-fulltext-content] > * {
    contain-intrinsic-size: 180px;
  }

  [data-fulltext-content] > ul,
  [data-fulltext-content] > ol {
    contain-intrinsic-size: 280px;
  }

  [data-fulltext-content] > pre,
  [data-fulltext-content] > blockquote,
  [data-fulltext-content] > table,
  [data-fulltext-content] > details {
    contain-intrinsic-size: 260px;
  }

  [data-fulltext-content] > .acg-prose-gallery {
    contain-intrinsic-size: 420px;
  }
}

/* 大列表滚动：用 content-visibility 降低离屏渲染开销（支持的浏览器会更顺滑） */
.acg-card {
  content-visibility: auto;
  contain-intrinsic-size: 360px;
}

@media (max-width: 640px) {
  .acg-card {
    contain-intrinsic-size: 180px;
  }
}

html[data-acg-device="phone"] .acg-card {
  contain-intrinsic-size: 180px;
}

/* 缺图占位：避免“纯文字感”，同时不引入外部图片资源 */
.acg-cover-fallback {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  padding: 16px;
  text-align: center;
  pointer-events: none;
  transition:
    opacity 220ms ease,
    transform 220ms ease;
}

.acg-cover-fallback-inner {
  display: grid;
  justify-items: center;
  gap: 10px;
  padding: 14px 16px;
  border-radius: 22px;
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.14), rgba(255, 255, 255, 0.06));
  box-shadow: 0 18px 60px rgba(2, 6, 23, 0.16);
}

.acg-cover-fallback-icon {
  display: grid;
  place-items: center;
  width: 44px;
  height: 44px;
  border-radius: 18px;
  background: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.9);
}

.acg-cover-fallback-icon .acg-icon path {
  stroke-dasharray: 140;
  stroke-dashoffset: 140;
  animation: acg-path-draw 1.35s var(--ease-smooth) infinite;
}

:root[data-acg-perf="low"] .acg-cover-fallback-icon .acg-icon path,
:root[data-acg-scroll="1"] .acg-cover-fallback-icon .acg-icon path {
  animation: none !important;
  stroke-dashoffset: 0;
}

.acg-cover-fallback-icon .acg-icon path:nth-child(2) {
  animation-delay: 90ms;
}

.acg-cover-fallback-icon .acg-icon path:nth-child(3) {
  animation-delay: 180ms;
}

.cover-loaded .acg-cover-fallback-icon .acg-icon path {
  animation: none;
  stroke-dashoffset: 0;
}

@media (prefers-reduced-motion: reduce) {
  .acg-cover-fallback-icon .acg-icon path {
    animation: none;
    stroke-dashoffset: 0;
  }
}

@keyframes acg-path-draw {
  0% {
    stroke-dashoffset: 140;
    opacity: 0.66;
  }
  45% {
    opacity: 0.98;
  }
  100% {
    stroke-dashoffset: 0;
    opacity: 0.92;
  }
}

.acg-cover-fallback-brand {
  font-size: 12px;
  font-weight: 800;
  letter-spacing: 0.02em;
  color: rgba(255, 255, 255, 0.95);
}

.acg-cover-fallback-meta {
  font-size: 11px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.78);
}

/* 封面失败：提供可见的“重试”入口（不放进 <a> 内，避免嵌套交互元素） */
.acg-cover-retry {
  position: absolute;
  top: 12px;
  right: 12px;
  z-index: 8;
  display: none;
  align-items: center;
  justify-content: center;
  width: 42px;
  height: 42px;
  border-radius: 16px;
  color: rgba(15, 23, 42, 0.92);
}

.cover-failed .acg-cover-retry {
  display: inline-flex;
}

/* Spotlight 顶部右侧已有收藏按钮，重试按钮向左错开 */
.acg-carousel-slide .acg-cover-retry {
  top: 14px;
  right: 62px;
}

/* 有封面时：让占位“先出现”，等图片真正加载后再淡出（避免慢网下看起来像“缺图”） */
.cover-loaded .acg-cover-fallback {
  opacity: 0;
  transform: translateY(4px) scale(0.98);
}

.cover-failed .acg-cover-fallback {
  opacity: 1;
  transform: translateY(0) scale(1);
}

/* 大量卡片的渲染优化：减少离屏绘制与布局影响 */
.acg-card {
  content-visibility: auto;
  contain: layout paint style;
  contain-intrinsic-size: 360px 320px;
}

/* 信息流“入场”微动效：仅 transform/opacity（低成本）。由脚本在可视时打标 data-acg-inview。 */
.acg-card[data-acg-inview="0"] {
  opacity: 0.92;
  transform: translateY(10px);
}

.acg-card[data-acg-inview="1"] {
  opacity: 1;
  transform: translateY(0);
}

:root[data-acg-perf="low"] .acg-card[data-acg-inview] {
  opacity: 1;
  transform: none;
}

@media (prefers-reduced-motion: reduce) {
  .acg-card[data-acg-inview] {
    opacity: 1;
    transform: none;
  }
}

/* 可点击触感 */
.clickable {
  cursor: pointer;
  transition:
    transform var(--dur-fast) var(--ease-standard),
    opacity var(--dur-fast) ease,
    box-shadow var(--dur-fast) ease,
    border-color var(--dur-fast) ease,
    background-color var(--dur-fast) ease,
    color var(--dur-fast) ease,
    filter var(--dur-fast) ease;
}
.clickable:hover {
  transform: translateY(-2px);
  border-color: rgba(15, 23, 42, 0.16);
  box-shadow: var(--shadow-card-hover);
}
.clickable:active {
  transform: translateY(0) scale(0.98);
}

@media (pointer: coarse) {
  /* 触控设备上禁用 hover “上浮”，减少误触与重绘 */
  .clickable:hover {
    transform: none;
    border-color: rgba(15, 23, 42, 0.12);
    box-shadow: var(--shadow-card);
  }
}

:root[data-acg-theme="dark"] .clickable:hover {
  border-color: rgba(148, 163, 184, 0.24);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-acg-theme]) .clickable:hover,
  :root[data-acg-theme="auto"] .clickable:hover {
    border-color: rgba(148, 163, 184, 0.24);
  }
}

@media (prefers-reduced-motion: reduce) {
  .clickable {
    transition: none;
  }
}

/* Skeleton：加载中骨架屏（低成本 shimmer，适配暗黑与减少动态效果偏好） */
.acg-skeleton {
  position: relative;
  overflow: hidden;
  background: rgba(15, 23, 42, 0.06);
}

:root[data-acg-theme="dark"] .acg-skeleton {
  background: rgba(148, 163, 184, 0.14);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-acg-theme]) .acg-skeleton,
  :root[data-acg-theme="auto"] .acg-skeleton {
    background: rgba(148, 163, 184, 0.14);
  }
}

.acg-skeleton::after {
  content: "";
  position: absolute;
  inset: 0;
  transform: translateX(-120%);
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.55), transparent);
  animation: acg-shimmer 1.1s linear infinite;
  opacity: 0.45;
}

:root[data-acg-perf="low"] .acg-skeleton::after,
:root[data-acg-scroll="1"] .acg-skeleton::after {
  display: none;
}

:root[data-acg-theme="dark"] .acg-skeleton::after {
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.12), transparent);
  opacity: 0.9;
}

@media (prefers-color-scheme: dark) {
  :root:not([data-acg-theme]) .acg-skeleton::after,
  :root[data-acg-theme="auto"] .acg-skeleton::after {
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.12), transparent);
    opacity: 0.9;
  }
}

@keyframes acg-shimmer {
  to {
    transform: translateX(120%);
  }
}

@media (prefers-reduced-motion: reduce) {
  .acg-skeleton::after {
    display: none;
  }
}

/* 防止“手机被当成 PC 布局”：当浏览器启用桌面站点时，宽度断点不可信；以设备分级为准 */
html[data-acg-device="phone"] .acg-layout-grid {
  grid-template-columns: 1fr !important;
}

html[data-acg-device="phone"] .acg-layout-grid > * {
  grid-column: 1 / -1 !important;
}

html[data-acg-device="phone"] .acg-post-grid {
  grid-template-columns: 1fr !important;
}

/* 横向滚动容器：手机端优先“可滑动”而不是换行（避免桌面断点把它变成一坨） */
html[data-acg-device="phone"] .acg-hscroll {
  flex-direction: row !important;
  flex-wrap: nowrap !important;
  overflow-x: auto !important;
  overflow-y: hidden !important;
}

/* 平板同理：即使启用了桌面站点，也要保持“可滑动”的资讯节奏 */
html[data-acg-device="tablet"] .acg-hscroll {
  flex-direction: row !important;
  flex-wrap: nowrap !important;
  overflow-x: auto !important;
  overflow-y: hidden !important;
}

/* 首页专项：手机/平板即使启用了“桌面站点”导致 sm 断点生效，也必须保持移动端的分类横滑（而不是桌面网格）。 */
html[data-acg-device="phone"] .acg-home-cats-mobile,
html[data-acg-device="tablet"] .acg-home-cats-mobile {
  display: flex !important;
}

html[data-acg-device="phone"] .acg-home-cats-desktop,
html[data-acg-device="tablet"] .acg-home-cats-desktop {
  display: none !important;
}

/* 列表卡片：手机端始终用“移动端媒体卡片”布局（避免 sm/md 触发桌面版） */
html[data-acg-device="phone"] .acg-post-card-body {
  display: flex !important;
  padding: 12px !important;
}

html[data-acg-device="phone"] .acg-post-card-cover {
  width: 8rem !important;
}

html[data-acg-device="phone"] .acg-post-card-cover-link {
  aspect-ratio: 4 / 3 !important;
  border-radius: 12px !important;
}

html[data-acg-device="phone"] .acg-post-card-cover-badges,
html[data-acg-device="phone"] .acg-post-card-cover-when {
  display: none !important;
}

html[data-acg-device="phone"] .acg-post-card-content {
  padding: 4px 0 !important;
}

/* 兜底：若手机在“桌面站点”下误触发了 lg 导航，也要强制回到移动端分类条 */
html[data-acg-device="phone"] .acg-nav-desktop {
  display: none !important;
}

html[data-acg-device="phone"] .acg-nav-mobile {
  display: flex !important;
}

/* 兜底：避免底部导航遮挡内容 */
html[data-acg-device="phone"] .acg-main,
html[data-acg-device="phone"] .acg-footer {
  padding-bottom: calc(32px + var(--acg-bottom-nav-h)) !important;
}

/* 平板适配：触控 + 中等屏幕优先“阅读”和“滑动”，避免落入纯桌面布局 */
html[data-acg-device="tablet"] .acg-nav-desktop {
  display: none !important;
}

html[data-acg-device="tablet"] .acg-nav-mobile {
  display: flex !important;
}

/* 兜底：即使启用了“桌面站点”导致 lg 断点触发，触控设备也必须保留底部导航（否则会显得像 PC 站点） */
html[data-acg-device="phone"] .acg-bottom-nav,
html[data-acg-device="tablet"] .acg-bottom-nav {
  display: flex !important;
}

html[data-acg-device="tablet"] .acg-layout-grid {
  grid-template-columns: 1fr !important;
}

html[data-acg-device="tablet"] .acg-layout-grid > * {
  grid-column: 1 / -1 !important;
}

html[data-acg-device="tablet"] .acg-post-grid {
  grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
}

/* 纯 CSS 兜底：
   即使 data-acg-device 未能注入（或浏览器启用“桌面站点”导致宽度断点失真），
   触控设备也必须走移动端节奏，避免“手机渲染成 PC 布局”与卡顿。 */
@media (hover: none), (pointer: coarse), (any-pointer: coarse), (any-hover: none) {
  .acg-layout-grid {
    grid-template-columns: 1fr !important;
  }

  .acg-layout-grid > * {
    grid-column: 1 / -1 !important;
  }

  .acg-post-grid {
    grid-template-columns: 1fr !important;
  }

  .acg-nav-desktop {
    display: none !important;
  }

  .acg-nav-mobile {
    display: flex !important;
  }

  .acg-bottom-nav {
    display: flex !important;
  }

  .acg-home-cats-mobile {
    display: flex !important;
  }

  .acg-home-cats-desktop {
    display: none !important;
  }

  .acg-hscroll {
    flex-direction: row !important;
    flex-wrap: nowrap !important;
    overflow-x: auto !important;
    overflow-y: hidden !important;
  }

  .acg-main,
  .acg-footer {
    padding-bottom: calc(32px + var(--acg-bottom-nav-h)) !important;
  }

  .glass {
    backdrop-filter: blur(var(--acg-glass-blur-phone)) saturate(var(--acg-glass-sat-phone));
    -webkit-backdrop-filter: blur(var(--acg-glass-blur-phone)) saturate(var(--acg-glass-sat-phone));
  }
}

/* 用户偏好：视图模式 / 信息密度
   - data-acg-view="list": 桌面也强制走“媒体卡片列表”节奏（更高信息吞吐）
   - data-acg-density="compact": 减少留白与摘要/标签占比（更省滚动） */
html[data-acg-view="list"] .acg-post-grid {
  grid-template-columns: 1fr !important;
}

html[data-acg-view="list"] .acg-post-card-body {
  display: flex !important;
  padding: 12px !important;
}

html[data-acg-view="list"] .acg-post-card-cover {
  width: 9rem !important;
}

html[data-acg-view="list"] .acg-post-card-cover-link {
  aspect-ratio: 4 / 3 !important;
  border-radius: 12px !important;
}

html[data-acg-view="list"] .acg-post-card-cover-badges,
html[data-acg-view="list"] .acg-post-card-cover-when {
  display: none !important;
}

html[data-acg-view="list"] .acg-post-card-content {
  padding: 4px 0 !important;
}

@media (min-width: 640px) {
  html[data-acg-view="list"] .acg-post-card-cover {
    width: 10rem !important;
  }
}

html[data-acg-density="compact"] .acg-post-grid {
  gap: 0.75rem !important;
}

html[data-acg-density="compact"] .acg-post-card-content p {
  -webkit-line-clamp: 1 !important;
}

html[data-acg-density="compact"] .acg-post-card-content .acg-hscroll {
  display: none !important;
}

/* Icon 基础：统一 SVG 图标风格（替换符号/emoji） */
.acg-icon {
  display: inline-block;
  vertical-align: -0.125em;
  flex: 0 0 auto;
  transition:
    transform var(--dur-fast) var(--ease-standard),
    filter var(--dur-fast) ease,
    opacity var(--dur-fast) ease;
}

.acg-icon path,
.acg-icon circle {
  vector-effect: non-scaling-stroke;
}

.acg-icon path {
  stroke-linecap: round;
  stroke-linejoin: round;
}

a:hover .acg-icon[data-icon="external-link"] {
  transform: translate(1px, -1px);
}

button[data-bookmark-id] [data-bookmark-icon],
button[data-source-follow-id] [data-source-follow-icon] {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

button[data-bookmark-id] [data-bookmark-icon] {
  color: rgba(15, 23, 42, 0.78);
  transition: color 180ms ease;
}

button[data-bookmark-id][aria-pressed="true"] [data-bookmark-icon] {
  color: rgba(124, 58, 237, 0.95);
}

button[data-bookmark-id] .acg-icon-star {
  fill: none;
  transition:
    fill 160ms ease,
    transform 160ms ease;
}

button[data-bookmark-id] .acg-icon[data-icon="star"] {
  transform-origin: 50% 55%;
}

button[data-bookmark-id]:hover .acg-icon[data-icon="star"] {
  transform: rotate(-10deg) scale(1.06);
}

button[data-bookmark-id].pop .acg-icon[data-icon="star"] {
  animation: acg-star-twinkle 320ms var(--ease-spring);
}

button[data-bookmark-id][aria-pressed="true"] .acg-icon-star {
  fill: currentColor;
}

button[data-bookmark-id][aria-pressed="true"] .acg-icon[data-icon="star"] {
  filter: drop-shadow(0 10px 26px rgba(124, 58, 237, 0.22));
}

button[data-source-follow-id] [data-source-follow-icon] {
  color: rgba(15, 23, 42, 0.78);
  transition: color 180ms ease;
}

button[data-source-follow-id][aria-pressed="true"] [data-source-follow-icon] {
  color: rgba(245, 158, 11, 0.95);
}

button[data-source-follow-id] .acg-icon-star {
  fill: none;
  transition: fill 160ms ease;
}

button[data-source-follow-id] .acg-icon[data-icon="star"] {
  transform-origin: 50% 55%;
}

button[data-source-follow-id]:hover .acg-icon[data-icon="star"] {
  transform: rotate(-9deg) scale(1.05);
}

button[data-source-follow-id].pop .acg-icon[data-icon="star"] {
  animation: acg-star-twinkle 320ms var(--ease-spring);
}

button[data-source-follow-id][aria-pressed="true"] .acg-icon-star {
  fill: currentColor;
}

button[data-source-follow-id][aria-pressed="true"] .acg-icon[data-icon="star"] {
  filter: drop-shadow(0 10px 26px rgba(245, 158, 11, 0.2));
}

.acg-cover-retry:hover .acg-icon[data-icon="refresh"] {
  transform: rotate(22deg);
}

.acg-cover-retry.is-spinning .acg-icon[data-icon="refresh"] {
  animation: acg-spin 650ms var(--ease-smooth);
}

.acg-carousel-nav:hover .acg-icon[data-icon="arrow-left"] {
  transform: translateX(-1.5px);
}

.acg-carousel-nav:hover .acg-icon[data-icon="arrow-right"] {
  transform: translateX(1.5px);
}

.acg-word-chip-x {
  opacity: 0.65;
  transition: opacity 160ms ease;
}

.acg-word-chip:hover .acg-word-chip-x {
  opacity: 1;
}

.acg-word-chip:hover .acg-icon[data-icon="x"] {
  transform: rotate(90deg);
}

#acg-back-to-top:hover .acg-icon[data-icon="arrow-up"] {
  transform: translateY(-1px);
}

@keyframes acg-spin {
  from {
    transform: rotate(0);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes acg-star-twinkle {
  0% {
    transform: rotate(0) scale(1);
  }
  45% {
    transform: rotate(-16deg) scale(1.14);
  }
  100% {
    transform: rotate(0) scale(1);
  }
}

@media (prefers-reduced-motion: reduce) {
  .acg-icon {
    transition: none;
  }
  .acg-cover-retry.is-spinning .acg-icon[data-icon="refresh"] {
    animation: none;
  }
  button[data-bookmark-id].pop .acg-icon[data-icon="star"],
  button[data-source-follow-id].pop .acg-icon[data-icon="star"] {
    animation: none;
  }
}

/* 快捷筛选 Chip：移动端更好点 */
.acg-chip {
  border: 1px solid transparent;
  background:
    var(--chip-surface) padding-box,
    var(--acg-border-gradient) border-box;
  color: var(--text);
  opacity: 0.88;
}

.acg-hscroll {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-x: contain;
  /* 允许横向滑动，同时不阻断纵向滚动（降低“卡住/抢手势”的体感） */
  touch-action: pan-x pan-y;
  scrollbar-width: none;
}

.acg-hscroll::-webkit-scrollbar {
  display: none;
}

.acg-chip[data-active="true"] {
  background:
    rgba(124, 58, 237, 0.16) padding-box,
    var(--acg-border-gradient) border-box;
  color: var(--text);
  opacity: 1;
}

/* 主题切换（偏好设置）：三段式 Segmented Control */
.acg-seg {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px;
  border-radius: 999px;
  border: 1px solid transparent;
  background:
    var(--chip-surface) padding-box,
    var(--acg-border-gradient) border-box;
}

.acg-seg-item {
  appearance: none;
  border: 0;
  background: transparent;
  color: var(--muted);
  font-size: 11px;
  font-weight: 900;
  letter-spacing: 0.01em;
  padding: 6px 10px;
  border-radius: 999px;
  cursor: pointer;
  line-height: 1;
  transition:
    transform var(--dur-fast) var(--ease-standard),
    background-color var(--dur-fast) ease,
    color var(--dur-fast) ease,
    box-shadow var(--dur-fast) ease;
}

.acg-seg-item:hover {
  background: rgba(124, 58, 237, 0.1);
  color: var(--text);
}

.acg-seg-item[data-active="true"] {
  background: rgba(124, 58, 237, 0.18);
  color: var(--text);
  box-shadow: 0 16px 45px rgba(124, 58, 237, 0.16);
}

.acg-seg-item:active {
  transform: scale(0.985);
}

@media (prefers-reduced-motion: reduce) {
  .acg-seg-item {
    transition: none;
  }
}

/* 高级“扫光”质感：只在 hover 时出现，不影响首帧可见性 */
.shine {
  position: relative;
  overflow: hidden;
}
.shine::after {
  content: "";
  position: absolute;
  top: -40%;
  left: -60%;
  width: 45%;
  height: 180%;
  pointer-events: none;
  opacity: 0;
  transform: rotate(18deg) translateX(0);
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.35) 50%,
    rgba(255, 255, 255, 0) 100%
  );
  transition:
    opacity var(--dur-fast) ease,
    transform var(--dur-slow) var(--ease-smooth);
}
.shine:hover::after {
  opacity: 0.9;
  transform: rotate(18deg) translateX(360%);
}

@media (hover: none) {
  /* 触控设备禁用 hover 扫光：减少伪元素数量与潜在重绘 */
  .shine::after {
    content: none;
  }
}

@media (prefers-reduced-motion: reduce) {
  .shine::after {
    display: none;
  }
}

/* 启动失败兜底：当脚本初始化失败时，提供静态可见的“错误边界”提示与刷新入口。 */
.acg-boot-fatal {
  position: fixed;
  top: calc(12px + env(safe-area-inset-top));
  left: 50%;
  transform: translateX(-50%);
  z-index: 70;
  width: min(520px, calc(100vw - 32px));
  display: none;
  pointer-events: none;
}

:root[data-acg-boot="failed"] .acg-boot-fatal {
  display: block;
}

.acg-boot-fatal-inner {
  pointer-events: auto;
  border-radius: 18px;
  border: 1px solid transparent;
  background:
    var(--toast-surface) padding-box,
    linear-gradient(135deg, rgba(244, 63, 94, 0.55), rgba(124, 58, 237, 0.32), rgba(244, 63, 94, 0.45))
      border-box;
  box-shadow: var(--acg-shadow-e8);
  padding: 12px 14px;
  color: var(--text);
}

.acg-boot-fatal-title {
  font-weight: 800;
  font-size: 12px;
}

.acg-boot-fatal-desc {
  margin-top: 4px;
  color: var(--muted);
  font-size: 12px;
  line-height: 1.4;
}

.acg-boot-fatal-action {
  margin-top: 10px;
  width: 100%;
  border-radius: 14px;
  border: 1px solid rgba(15, 23, 42, 0.12);
  background: rgba(255, 255, 255, 0.7);
  padding: 10px 12px;
  font-weight: 700;
  font-size: 12px;
  color: rgba(15, 23, 42, 0.92);
}

:root[data-acg-theme="dark"] .acg-boot-fatal-action {
  border-color: rgba(255, 255, 255, 0.14);
  background: rgba(255, 255, 255, 0.08);
  color: rgba(255, 255, 255, 0.9);
}

/* Toast：轻量交互反馈（不依赖框架） */
.acg-toast-root {
  position: fixed;
  right: 16px;
  bottom: calc(16px + env(safe-area-inset-bottom) + var(--acg-bottom-nav-h));
  z-index: 60;
  display: grid;
  gap: 10px;
  width: min(420px, calc(100vw - 32px));
}

.acg-toast {
  --acg-toast-border: var(--acg-border-gradient);
  position: relative;
  padding: 12px 14px 12px 44px;
  border-radius: 16px;
  border: 1px solid transparent;
  background:
    var(--toast-surface) padding-box,
    var(--acg-toast-border) border-box;
  box-shadow: var(--acg-shadow-e7);
  backdrop-filter: blur(14px) saturate(1.22);
  -webkit-backdrop-filter: blur(14px) saturate(1.22);
  color: var(--text);
  font-size: 12px;
  line-height: 1.4;
  cursor: pointer;
  user-select: none;
  animation: toast-in 260ms var(--ease-spring) both;
  transition: box-shadow var(--dur-fast) ease;
}

.acg-toast:hover {
  box-shadow: var(--acg-shadow-e8);
}

.acg-toast::before {
  content: "i";
  position: absolute;
  left: 14px;
  top: 12px;
  width: 22px;
  height: 22px;
  display: grid;
  place-items: center;
  border-radius: 12px;
  font-weight: 900;
  color: rgba(124, 58, 237, 0.95);
  background: rgba(124, 58, 237, 0.14);
  border: 1px solid rgba(124, 58, 237, 0.24);
}

.acg-toast[data-variant="success"] {
  --acg-toast-border: linear-gradient(
    135deg,
    rgba(16, 185, 129, 0.55),
    rgba(59, 130, 246, 0.3),
    rgba(16, 185, 129, 0.45)
  );
}

.acg-toast[data-variant="success"]::before {
  content: "✓";
  color: rgba(16, 185, 129, 0.95);
  background: rgba(16, 185, 129, 0.14);
  border-color: rgba(16, 185, 129, 0.28);
}

.acg-toast[data-variant="error"] {
  --acg-toast-border: linear-gradient(
    135deg,
    rgba(244, 63, 94, 0.55),
    rgba(124, 58, 237, 0.32),
    rgba(244, 63, 94, 0.45)
  );
}

.acg-toast[data-variant="error"]::before {
  content: "!";
  color: rgba(244, 63, 94, 0.95);
  background: rgba(244, 63, 94, 0.12);
  border-color: rgba(244, 63, 94, 0.26);
}

.acg-toast.is-leaving {
  animation: toast-out 180ms ease both;
}

.acg-toast-title {
  font-weight: 700;
  font-size: 12px;
  color: var(--text);
}

.acg-toast-desc {
  margin-top: 4px;
  color: var(--muted);
}

@keyframes toast-in {
  from {
    opacity: 0;
    transform: translateY(10px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes toast-out {
  to {
    opacity: 0;
    transform: translateY(10px) scale(0.98);
  }
}

@media (prefers-reduced-motion: reduce) {
  .acg-toast {
    animation: none;
    transition: none;
  }
}

/* 浮动按钮（回到顶部等） */
.acg-fab {
  position: fixed;
  left: 16px;
  bottom: calc(16px + env(safe-area-inset-bottom) + var(--acg-bottom-nav-h));
  z-index: 55;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 16px;
  color: var(--text);
}

.acg-fab-icon {
  display: grid;
  place-items: center;
  width: 26px;
  height: 26px;
  border-radius: 12px;
  background: var(--nav-icon-bg);
  font-weight: 800;
}

.acg-fab-label {
  font-size: 12px;
  font-weight: 700;
  color: var(--muted);
}

/* Tailwind v3 未内置 line-clamp，这里提供轻量替代 */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;
  overflow: hidden;
}

/* 已读状态：轻微降饱和，提升“信息流感” */
[data-post-id][data-read="true"] {
  opacity: 0.78;
}
[data-post-id][data-read="true"] img {
  opacity: 0.92;
}

/* 新鲜度：小脉冲点（只用于少量 “NEW/新着” 徽章，避免全站高频动画） */
.acg-dot-pulse {
  position: relative;
}

/* 性能：避免 box-shadow 动画（会触发频繁重绘），改为 transform + opacity（更丝滑）。 */
.acg-dot-pulse::after {
  content: "";
  position: absolute;
  inset: -7px;
  border-radius: 999px;
  border: 2px solid rgba(16, 185, 129, 0.55);
  transform: scale(0.2);
  opacity: 0;
  animation: acg-pulse-ring 1.6s ease-out infinite;
  will-change: transform, opacity;
}

@keyframes acg-pulse-ring {
  0% {
    transform: scale(0.2);
    opacity: 0;
  }
  14% {
    opacity: 1;
  }
  100% {
    transform: scale(1.35);
    opacity: 0;
  }
}

[data-post-id][data-read="true"] .acg-dot-pulse {
  animation: none;
}

[data-post-id][data-read="true"] .acg-dot-pulse::after {
  content: none;
}

@media (prefers-reduced-motion: reduce) {
  .acg-dot-pulse {
    animation: none;
  }
  .acg-dot-pulse::after {
    content: none;
  }
}

/* 列表“交错入场”（不使用 opacity=0，避免空白屏） */
.stagger-item {
  animation: rise-in 650ms var(--ease-smooth) both;
  animation-delay: calc(var(--i, 0) * 26ms);
}

@keyframes rise-in {
  from {
    transform: translateY(10px);
  }
  to {
    transform: translateY(0);
  }
}

@media (prefers-reduced-motion: reduce) {
  .stagger-item {
    animation: none;
  }
}

/* 轻微“弹一下”的强调动效（用于收藏等即时反馈） */
.pop {
  animation: pop 320ms var(--ease-spring);
}

@keyframes pop {
  0% {
    transform: scale(1);
  }
  35% {
    transform: scale(1.06);
  }
  100% {
    transform: scale(1);
  }
}

/* 雷达 Logo（纯 CSS，减少“纯文字”观感） */
.radar {
  position: relative;
  border-radius: 18px;
  overflow: hidden;
  background: radial-gradient(circle at 35% 35%, rgba(16, 185, 129, 0.35), transparent 55%),
    radial-gradient(circle at 70% 35%, rgba(59, 130, 246, 0.3), transparent 55%),
    linear-gradient(135deg, rgba(15, 23, 42, 0.92), rgba(15, 23, 42, 0.72));
  border: 1px solid rgba(255, 255, 255, 0.16);
}

.radar::before {
  content: "";
  position: absolute;
  inset: -55%;
  background: conic-gradient(
    from 0deg,
    rgba(124, 58, 237, 0) 0deg,
    rgba(124, 58, 237, 0.55) 30deg,
    rgba(124, 58, 237, 0) 60deg,
    rgba(124, 58, 237, 0) 360deg
  );
  animation: radar-sweep 3.2s linear infinite;
}

.radar::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(
      circle at center,
      transparent 0 42%,
      rgba(255, 255, 255, 0.1) 43%,
      transparent 44%
    ),
    radial-gradient(circle at center, transparent 0 66%, rgba(255, 255, 255, 0.06) 67%, transparent 68%);
  opacity: 0.85;
}

@keyframes radar-sweep {
  to {
    transform: rotate(1turn);
  }
}

@media (prefers-reduced-motion: reduce) {
  .radar::before {
    animation: none;
  }
}

/* Spotlight：封面轮播（杂志式“封面墙”） */
.acg-spotlight {
  /* 性能：Spotlight 通常在首屏下方（尤其移动端），应避免“离屏大块内容”参与首屏渲染/合成。
     注意：整段 section 做 content-visibility 可能导致 a11y（color-contrast）在离屏状态下误判背景色。
     因此只对 carousel 本体启用，既稳 LCP，也不影响标题/提示文字的可访问性审计。 */
}

.acg-spotlight .acg-carousel {
  content-visibility: auto;
  contain-intrinsic-size: 560px;
}

@media (max-width: 640px) {
  .acg-spotlight .acg-carousel {
    contain-intrinsic-size: 480px;
  }
}

.acg-carousel {
  position: relative;
  overflow: hidden;
}

.acg-carousel-track {
  display: grid;
  grid-auto-flow: column;
  /* 小屏做“露出下一张”的 peeking，强提示“可滑动” */
  grid-auto-columns: 92%;
  gap: 14px;
  padding: 14px;
  overflow-x: auto;
  overflow-y: hidden;
  overscroll-behavior-x: contain;
  scroll-snap-type: x mandatory;
  scroll-padding-left: 14px;
  scroll-padding-right: 14px;
  -webkit-overflow-scrolling: touch;
  /* 允许横向滑动，同时不阻断纵向滚动（避免“卡住”） */
  touch-action: pan-x pan-y;
  scrollbar-width: none;
}

@media (pointer: fine) {
  .acg-carousel-track {
    cursor: grab;
  }
  .acg-carousel-track.is-dragging {
    cursor: grabbing;
  }
}

.acg-carousel-track::-webkit-scrollbar {
  display: none;
}

@media (min-width: 768px) {
  .acg-carousel-track {
    grid-auto-columns: minmax(520px, 72%);
    gap: 16px;
    padding: 16px;
    scroll-padding-left: 16px;
    scroll-padding-right: 16px;
  }
}

.acg-carousel-slide {
  position: relative;
  min-height: 320px;
  border-radius: 22px;
  overflow: hidden;
  scroll-snap-align: start;
  scroll-snap-stop: always;
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-card);
  contain: layout paint style;
}

@media (min-width: 768px) {
  .acg-carousel-slide {
    min-height: 360px;
  }
}

.acg-carousel-hit {
  position: absolute;
  inset: 0;
  z-index: 5;
}

.acg-carousel-bg,
.acg-carousel-img,
.acg-carousel-vignette {
  position: absolute;
  inset: 0;
}

.acg-carousel-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transform: scale(1.02);
  transition: transform 520ms var(--ease-smooth);
}

.acg-carousel-slide:hover .acg-carousel-img {
  transform: scale(1.04);
}

.acg-carousel-vignette {
  background: radial-gradient(900px 420px at 18% 15%, rgba(255, 255, 255, 0.1), transparent 55%),
    linear-gradient(180deg, rgba(2, 6, 23, 0.08) 0%, rgba(2, 6, 23, 0.42) 70%, rgba(2, 6, 23, 0.62) 100%);
}

.acg-carousel-content {
  position: absolute;
  left: 16px;
  right: 16px;
  /* 底部会叠一个“嵌入式控件条”，内容向上抬一点，避免遮挡标题/来源 */
  bottom: 64px;
  z-index: 4;
}

html[data-acg-device="phone"] .acg-carousel-content {
  bottom: 56px;
}

.acg-carousel-bookmark {
  position: absolute;
  top: 14px;
  right: 14px;
  z-index: 6;
  border-radius: 14px;
  padding: 10px 12px;
  color: #0b0f14;
}

.acg-carousel-controls {
  position: absolute;
  left: 14px;
  right: 14px;
  bottom: 14px;
  z-index: 7;
  display: flex;
  justify-content: center;
  pointer-events: none;
}

html[data-acg-device="phone"] .acg-carousel-controls {
  bottom: 12px;
}

.acg-carousel-controls-inner {
  pointer-events: auto;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.4);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.86), rgba(255, 255, 255, 0.62));
  box-shadow: 0 18px 55px rgba(2, 6, 23, 0.18);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

html[data-acg-device="phone"] .acg-carousel-controls-inner {
  gap: 10px;
  padding: 7px 9px;
  box-shadow: 0 16px 46px rgba(2, 6, 23, 0.16);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.acg-carousel-nav {
  position: absolute;
  top: 12px;
  bottom: 12px;
  width: 44px;
  height: auto;
  z-index: 8;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 22px 70px rgba(2, 6, 23, 0.16);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  color: rgba(15, 23, 42, 0.92);
  opacity: 0.46;
  transform: none;
  transition:
    opacity 160ms ease,
    transform 160ms ease,
    border-color 160ms ease;
}

.acg-carousel-nav-prev {
  left: 14px;
  background: linear-gradient(90deg, rgba(255, 255, 255, 0.58), rgba(255, 255, 255, 0.02));
}

.acg-carousel-nav-next {
  right: 14px;
  background: linear-gradient(-90deg, rgba(255, 255, 255, 0.58), rgba(255, 255, 255, 0.02));
}

.acg-carousel:hover .acg-carousel-nav,
.acg-carousel:focus-within .acg-carousel-nav {
  opacity: 0.95;
  border-color: rgba(124, 58, 237, 0.22);
}

.acg-carousel-nav:active {
  transform: scale(0.98);
}

@media (pointer: coarse) {
  /* 触控设备优先手势滑动，不摆“大按钮”遮画面 */
  .acg-carousel-nav {
    display: none;
  }
}

html[data-acg-device="phone"] .acg-carousel-nav {
  display: none;
}

.acg-carousel-dots {
  display: flex;
  justify-content: center;
  gap: 8px;
}

.acg-carousel-dot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: var(--carousel-dot-bg);
  border: 1px solid var(--glass-border);
  transition:
    width 180ms ease,
    background-color 180ms ease,
    transform 180ms ease;
}

html[data-acg-device="phone"] .acg-carousel-dot {
  width: 10px;
  height: 10px;
}

.acg-carousel-dot.is-active {
  width: 18px;
  background: rgba(124, 58, 237, 0.72);
  border-color: rgba(124, 58, 237, 0.35);
}

html[data-acg-device="phone"] .acg-carousel-dot.is-active {
  width: 24px;
}

.acg-carousel-dot:active {
  transform: scale(0.95);
}

@media (prefers-reduced-motion: reduce) {
  .acg-carousel-img {
    transition: none;
    transform: none;
  }
}

/* 移动端底部导航（更像 App） */
.acg-bottom-nav {
  position: fixed;
  left: 10px;
  right: 10px;
  bottom: calc(10px + env(safe-area-inset-bottom));
  z-index: 50;
  display: flex;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 22px;
  border: 1px solid var(--glass-border);
  background: var(--bottom-nav-surface);
  box-shadow: 0 22px 70px rgba(2, 6, 23, 0.16);
  /* 性能：固定层的 backdrop-filter 在移动端滚动时非常容易掉帧；这里默认禁用。 */
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

html[data-acg-device="phone"] .acg-bottom-nav {
  /* 手机端：固定层的 blur/阴影更容易拖慢滚动，适度降级更“稳” */
  box-shadow: 0 18px 55px rgba(2, 6, 23, 0.14);
  background: var(--bottom-nav-surface-phone);
}

@media (min-width: 1024px) {
  /* 桌面端不显示底部导航（避免与顶部导航重复） */
  .acg-bottom-nav {
    display: none;
  }
}

html[data-acg-device="phone"] .acg-bottom-nav {
  display: flex;
}

.acg-bottom-nav-item {
  flex: 1;
  min-width: 0;
  display: grid;
  justify-items: center;
  gap: 4px;
  padding: 8px 10px;
  border-radius: 18px;
  color: var(--muted);
  text-decoration: none;
  transition:
    transform var(--dur-fast) var(--ease-standard),
    background-color var(--dur-fast) ease,
    color var(--dur-fast) ease;
}

.acg-bottom-nav-item:active {
  transform: scale(0.98);
}

.acg-bottom-nav-item[data-active="true"] {
  background: linear-gradient(180deg, rgba(124, 58, 237, 0.16), rgba(124, 58, 237, 0.08));
  color: var(--text);
  transform: translateY(-1px);
}

.acg-bottom-nav-icon {
  display: grid;
  place-items: center;
  width: 30px;
  height: 30px;
  border-radius: 14px;
  background: var(--nav-icon-bg);
  color: var(--nav-icon-fg);
}

.acg-bottom-nav-item[data-active="true"] .acg-bottom-nav-icon {
  background: linear-gradient(135deg, rgba(124, 58, 237, 0.28), rgba(59, 130, 246, 0.18));
  color: rgba(124, 58, 237, 0.95);
  box-shadow: 0 14px 40px rgba(124, 58, 237, 0.18);
}

.acg-bottom-nav-label {
  font-size: 10px;
  font-weight: 800;
  letter-spacing: 0.02em;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

@supports (-webkit-mask-image: linear-gradient(90deg, #000, transparent)) or
  (mask-image: linear-gradient(90deg, #000, transparent)) {
  .acg-bottom-nav-label {
    text-overflow: clip;
    -webkit-mask-image: linear-gradient(90deg, #000 0, #000 calc(100% - 12px), transparent 100%);
    mask-image: linear-gradient(90deg, #000 0, #000 calc(100% - 12px), transparent 100%);
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
  }
}

/* 移动端：偏好设置抽屉（避免 prefs 把页面拖得很长，也更像 App） */
body.acg-no-scroll {
  overflow: hidden;
}

/* 命令面板（Command Palette）：Ctrl/⌘ + K */
.acg-cmdk-root {
  position: fixed;
  inset: 0;
  z-index: 80;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 14px;
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--dur) ease;
}

.acg-cmdk-root.is-open {
  opacity: 1;
  pointer-events: auto;
}

.acg-cmdk-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(2, 6, 23, 0.42);
  backdrop-filter: blur(3px);
  -webkit-backdrop-filter: blur(3px);
}

:root[data-acg-perf="low"] .acg-cmdk-backdrop {
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

.acg-cmdk-panel {
  position: relative;
  width: min(720px, 96vw);
  max-height: min(560px, calc(100vh - 28px));
  display: flex;
  flex-direction: column;
  border-radius: 26px;
  border: 1px solid var(--glass-border);
  background: var(--glass-card-surface);
  box-shadow: var(--acg-shadow-e10);
  overflow: hidden;
  backdrop-filter: blur(var(--acg-glass-blur)) saturate(var(--acg-glass-sat));
  -webkit-backdrop-filter: blur(var(--acg-glass-blur)) saturate(var(--acg-glass-sat));
  transform: translateY(10px) scale(0.985);
  transition:
    transform var(--dur) var(--ease-spring),
    box-shadow var(--dur) ease;
  will-change: transform;
}

.acg-cmdk-root.is-open .acg-cmdk-panel {
  transform: translateY(0) scale(1);
}

.acg-cmdk-head {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
  padding: 16px 16px 10px;
}

.acg-cmdk-title {
  font-size: 14px;
  font-weight: 900;
  letter-spacing: 0.01em;
  color: var(--text);
}

.acg-cmdk-hint {
  font-size: 12px;
  font-weight: 800;
  color: var(--muted);
  border-radius: 999px;
  border: 1px solid var(--glass-border);
  background: rgba(255, 255, 255, 0.35);
  padding: 4px 10px;
}

:root[data-acg-theme="dark"] .acg-cmdk-hint {
  background: rgba(15, 23, 42, 0.42);
}

.acg-cmdk-input {
  margin: 0 16px 12px;
  padding: 12px 12px;
  border-radius: 16px;
  border: 1px solid var(--glass-border);
  background: rgba(255, 255, 255, 0.45);
  color: var(--text);
  outline: none;
  font-size: 14px;
  font-weight: 700;
}

:root[data-acg-theme="dark"] .acg-cmdk-input {
  background: rgba(2, 6, 23, 0.42);
}

.acg-cmdk-input:focus-visible {
  box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.25);
  border-color: rgba(124, 58, 237, 0.35);
}

.acg-cmdk-list {
  padding: 0 12px 12px;
  overflow: auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
  scrollbar-gutter: stable;
  scrollbar-width: thin;
  scrollbar-color: rgba(124, 58, 237, 0.46) transparent;
}

.acg-cmdk-list::-webkit-scrollbar {
  width: 10px;
}

.acg-cmdk-list::-webkit-scrollbar-thumb {
  background: rgba(124, 58, 237, 0.36);
  border: 3px solid transparent;
  background-clip: padding-box;
  border-radius: 999px;
}

.acg-cmdk-list::-webkit-scrollbar-track {
  background: transparent;
}

.acg-cmdk-section {
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 10px 6px 6px;
  padding: 4px 6px;
}

.acg-cmdk-section-title {
  font-size: 11px;
  font-weight: 900;
  letter-spacing: 0.16em;
  color: var(--muted);
  text-transform: uppercase;
}

.acg-cmdk-section::after {
  content: "";
  flex: 1;
  height: 1px;
  background: rgba(148, 163, 184, 0.28);
  -webkit-mask-image: linear-gradient(90deg, #000, transparent);
  mask-image: linear-gradient(90deg, #000, transparent);
}

.acg-cmdk-mark {
  padding: 0 2px;
  border-radius: 6px;
  background: rgba(124, 58, 237, 0.16);
  border: 1px solid rgba(124, 58, 237, 0.22);
  color: var(--text);
  font-weight: 900;
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.acg-cmdk-item {
  width: 100%;
  text-align: left;
  display: block;
  padding: 12px 12px;
  border-radius: 18px;
  border: 1px solid transparent;
  background: transparent;
  color: inherit;
  cursor: pointer;
  transition:
    background-color var(--dur-fast) ease,
    transform var(--dur-fast) var(--ease-standard),
    border-color var(--dur-fast) ease;
}

.acg-cmdk-item:hover {
  background: rgba(255, 255, 255, 0.48);
}

:root[data-acg-theme="dark"] .acg-cmdk-item:hover {
  background: rgba(15, 23, 42, 0.52);
}

.acg-cmdk-item.is-active,
.acg-cmdk-item[aria-selected="true"] {
  background: rgba(124, 58, 237, 0.12);
  border-color: rgba(124, 58, 237, 0.24);
  transform: translateY(-1px);
}

.acg-cmdk-item:focus-visible {
  box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.22);
  border-color: rgba(124, 58, 237, 0.35);
}

.acg-cmdk-item-title {
  font-size: 14px;
  font-weight: 900;
  color: var(--text);
}

.acg-cmdk-item-desc {
  margin-top: 2px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 700;
}

.acg-cmdk-empty {
  padding: 18px 14px;
  border-radius: 18px;
  border: 1px dashed var(--glass-border);
  color: var(--muted);
  font-size: 13px;
  font-weight: 800;
}

.acg-cmdk-foot {
  padding: 10px 16px 14px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
  border-top: 1px solid var(--glass-border);
  background: rgba(255, 255, 255, 0.22);
}

:root[data-acg-theme="dark"] .acg-cmdk-foot {
  background: rgba(2, 6, 23, 0.22);
}

@media (prefers-reduced-motion: reduce) {
  .acg-cmdk-root {
    transition: none;
  }
  .acg-cmdk-panel {
    transition: none;
    transform: none;
  }
  .acg-cmdk-item {
    transition: none;
  }
}

.acg-prefs-drawer {
  position: relative;
}

@media (max-width: 767px) {
  .acg-prefs-drawer {
    position: fixed;
    inset: 0;
    z-index: 70;
    display: flex;
    align-items: flex-end;
    padding: 12px;
    padding-bottom: calc(12px + env(safe-area-inset-bottom));
    background: rgba(2, 6, 23, 0.38);
    opacity: 0;
    pointer-events: none;
    transition: opacity var(--dur) ease;
  }

  .acg-prefs-drawer.is-open {
    opacity: 1;
    pointer-events: auto;
  }

  .acg-prefs-drawer-panel {
    width: 100%;
    max-height: calc(100vh - 24px - env(safe-area-inset-top));
    overflow: auto;
    border-radius: 24px;
    background: rgba(255, 255, 255, 0.01);
    box-shadow: 0 40px 120px rgba(2, 6, 23, 0.28);
    transform: translateY(20px);
    transition: transform var(--dur) var(--ease-spring);
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
  }

  .acg-prefs-drawer-panel::before {
    content: "";
    display: block;
    width: 44px;
    height: 5px;
    margin: 10px auto 0;
    border-radius: 999px;
    background: rgba(15, 23, 42, 0.16);
    border: 1px solid rgba(255, 255, 255, 0.55);
  }

  .acg-prefs-drawer.is-open .acg-prefs-drawer-panel {
    transform: translateY(0);
  }
}

@media (prefers-reduced-motion: reduce) {
  .acg-prefs-drawer {
    transition: none;
  }
  .acg-prefs-drawer-panel {
    transition: none;
    transform: none;
  }
}

@media (min-width: 768px) {
  .acg-prefs-drawer {
    position: static;
    inset: auto;
    z-index: auto;
    display: block;
    padding: 0;
    background: none;
    opacity: 1;
    pointer-events: auto;
    transition: none;
  }

  .acg-prefs-drawer-panel {
    max-height: none;
    overflow: visible;
    border-radius: 0;
    box-shadow: none;
    transform: none;
    transition: none;
    background: none;
  }

  .acg-prefs-drawer-panel::before {
    content: none;
  }
}

/* 手机端偏好设置抽屉：即使处于“桌面站点/大视口”，也保持抽屉模式 */
html[data-acg-device="phone"] .acg-prefs-drawer {
  position: fixed;
  inset: 0;
  z-index: 70;
  display: flex;
  align-items: flex-end;
  padding: 12px;
  padding-bottom: calc(12px + env(safe-area-inset-bottom));
  background: rgba(2, 6, 23, 0.38);
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--dur) ease;
}

html[data-acg-device="phone"] .acg-prefs-drawer.is-open {
  opacity: 1;
  pointer-events: auto;
}

html[data-acg-device="phone"] .acg-prefs-drawer-panel {
  width: 100%;
  max-height: calc(100vh - 24px - env(safe-area-inset-top));
  overflow: auto;
  border-radius: 24px;
  background: rgba(255, 255, 255, 0.01);
  box-shadow: 0 40px 120px rgba(2, 6, 23, 0.28);
  transform: translateY(20px);
  transition: transform var(--dur) var(--ease-spring);
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}

html[data-acg-device="phone"] .acg-prefs-drawer-panel::before {
  content: "";
  display: block;
  width: 44px;
  height: 5px;
  margin: 10px auto 0;
  border-radius: 999px;
  background: rgba(15, 23, 42, 0.16);
  border: 1px solid rgba(255, 255, 255, 0.55);
}

html[data-acg-device="phone"] .acg-prefs-drawer.is-open .acg-prefs-drawer-panel {
  transform: translateY(0);
}

/* Signal board */
.acg-signal-board {
  position: relative;
  overflow: hidden;
}

.acg-signal-board::before {
  content: "";
  position: absolute;
  inset: -40% -30%;
  background: radial-gradient(circle at 20% 20%, rgba(56, 189, 248, 0.12), transparent 55%),
    radial-gradient(circle at 80% 0%, rgba(14, 165, 233, 0.12), transparent 50%),
    radial-gradient(circle at 40% 80%, rgba(16, 185, 129, 0.12), transparent 55%);
  opacity: 0.6;
  pointer-events: none;
}

.acg-signal-grid {
  position: relative;
  display: grid;
  gap: 12px;
}

@media (min-width: 640px) {
  .acg-signal-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

.acg-signal-card {
  border: 1px solid var(--glass-border);
  border-radius: 18px;
  padding: 14px;
  background: var(--glass-card-surface);
  box-shadow: var(--shadow-card);
}

.acg-signal-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.acg-signal-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: 8px;
}

.acg-signal-item {
  display: flex;
  align-items: center;
  gap: 10px;
  border-radius: 12px;
  padding: 8px 10px;
  background: rgba(255, 255, 255, 0.55);
  border: 1px solid rgba(15, 23, 42, 0.08);
  transition:
    transform var(--dur) var(--ease-smooth),
    box-shadow var(--dur) var(--ease-smooth);
}

.acg-signal-item:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-card-hover);
}

.acg-signal-rank {
  font-size: 11px;
  font-weight: 700;
  color: rgba(15, 23, 42, 0.65);
  min-width: 2.5ch;
}

.acg-signal-title {
  flex: 1;
  font-size: 12px;
  font-weight: 600;
  color: var(--text);
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.acg-signal-meta {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  color: var(--muted);
}

.acg-signal-score {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 2.6ch;
  padding: 2px 6px;
  border-radius: 999px;
  font-weight: 700;
  color: rgba(12, 74, 110, 0.95);
  background: rgba(14, 165, 233, 0.18);
}

.acg-signal-time {
  font-size: 11px;
}

.acg-signal-chip {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  border-radius: 12px;
  border: 1px solid rgba(15, 23, 42, 0.08);
  background: rgba(255, 255, 255, 0.55);
  padding: 8px 10px;
  font-size: 12px;
  color: var(--text);
}

.acg-signal-chip[data-active="true"] {
  border-color: rgba(14, 165, 233, 0.45);
  box-shadow: 0 0 0 1px rgba(14, 165, 233, 0.18) inset;
}

.acg-signal-chip-count {
  font-size: 11px;
  font-weight: 700;
  color: rgba(15, 23, 42, 0.7);
}

.acg-signal-health-bar {
  position: relative;
  height: 6px;
  border-radius: 999px;
  background: rgba(15, 23, 42, 0.08);
  overflow: hidden;
}

.acg-signal-health-bar > span {
  display: block;
  height: 100%;
  width: calc(var(--acg-health, 0) * 1%);
  background: linear-gradient(90deg, rgba(16, 185, 129, 0.85), rgba(14, 165, 233, 0.85));
}

/* Metrics */
.acg-metric {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(15, 23, 42, 0.08);
  background: rgba(255, 255, 255, 0.55);
  font-weight: 600;
}

.acg-metric-pulse {
  color: rgba(12, 74, 110, 0.95);
  background: rgba(14, 165, 233, 0.16);
}

.acg-metric-dup {
  color: rgba(100, 116, 139, 0.9);
}

/* Health pills */
.acg-health-pill {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  border-radius: 999px;
  font-weight: 700;
  font-size: 10px;
  letter-spacing: 0.02em;
  border: 1px solid transparent;
  background: rgba(255, 255, 255, 0.55);
}

.acg-health-dot {
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: currentColor;
}

.acg-health-text {
  line-height: 1;
}

.acg-health-excellent {
  color: rgba(20, 184, 166, 0.9);
  border-color: rgba(20, 184, 166, 0.28);
  background: rgba(20, 184, 166, 0.14);
}

.acg-health-good {
  color: rgba(34, 197, 94, 0.9);
  border-color: rgba(34, 197, 94, 0.28);
  background: rgba(34, 197, 94, 0.14);
}

.acg-health-warn {
  color: rgba(245, 158, 11, 0.92);
  border-color: rgba(245, 158, 11, 0.28);
  background: rgba(245, 158, 11, 0.12);
}

.acg-health-down {
  color: rgba(244, 63, 94, 0.92);
  border-color: rgba(244, 63, 94, 0.3);
  background: rgba(244, 63, 94, 0.12);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-acg-theme]) .acg-signal-item,
  :root[data-acg-theme="auto"] .acg-signal-item,
  :root[data-acg-theme="dark"] .acg-signal-item {
    background: rgba(15, 23, 42, 0.55);
    border-color: rgba(148, 163, 184, 0.18);
  }

  :root:not([data-acg-theme]) .acg-signal-chip,
  :root[data-acg-theme="auto"] .acg-signal-chip,
  :root[data-acg-theme="dark"] .acg-signal-chip {
    background: rgba(15, 23, 42, 0.55);
    border-color: rgba(148, 163, 184, 0.2);
  }

  :root:not([data-acg-theme]) .acg-metric,
  :root[data-acg-theme="auto"] .acg-metric,
  :root[data-acg-theme="dark"] .acg-metric {
    background: rgba(15, 23, 42, 0.5);
    border-color: rgba(148, 163, 184, 0.22);
  }
}
